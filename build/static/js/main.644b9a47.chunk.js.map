{"version":3,"sources":["components/common/IconFont/iconFont.js","components/index.js","components/Header/Header.js","components/common/IconFont/index.js","components/Toolbar/Toolbar.js","components/common/CustomOverlay/CustomOverlay.js","components/ViewerMain/ViewerMain.js","hook/useWindowSize.js","components/MiddleSidePanel/MiddleSidePanel.js","components/common/NoduleInfo/NoduleInfo.js","components/common/MarkNoduleTool/toolColors.js","components/common/MarkNoduleTool/toolStyle.js","components/common/MarkNoduleTool/util.js","components/common/MarkNoduleTool/MarkNoduleTool.js","components/common/MarkDialog/MarkDialog.js","util/index.js","api/api.js","pages/Viewer/Viewer.js","pages/StudyList/StudyList.js","pages/TaskList/TaskList.js","router/config.js","router/index.js","App.js","reportWebVitals.js","initCornerstone.js","index.js"],"names":["a","t","l","e","h","i","o","c","document","getElementsByTagName","length","getAttribute","__iconfont__svg__cssinject__","write","console","log","d","createElement","innerHTML","setAttribute","style","position","width","height","overflow","body","firstChild","parentNode","insertBefore","n","appendChild","addEventListener","indexOf","readyState","setTimeout","removeEventListener","attachEvent","s","documentElement","doScroll","onreadystatechange","window","memo","withRouter","props","location","pathname","history","push","className","renderRoutes","route","routes","Header","data","patientName","gender_dictText","age","medicalCaseCode","patientId","createTime","pageType","disabled","pageState","type","onClick","handleShowModal","IconFont","createFromIconfontCN","scriptUrl","iconfont","toolbarList","id","text","icon","fontSize","checked","filter","Toolbar","useState","state","setstate","map","item","index","handleToolbarClick","title","CustomOverlay","imageIndex","stackSize","windowWidth","windowCenter","ViewerMain","size","clientWidth","clientHeight","setSize","onResize","useCallback","useEffect","useWindowSize","imagesConfig","tip","imageIdIndex","viewportOverlayComponent","onElementEnabled","elementEnabledEvt","handleElementEnabledEvt","tools","toolsConfig","imageIds","minWidth","flex","MiddleSidePanel","Input","TextArea","noduleList","active","num","onCheckChange","handleListClick","onChange","replace","undefined","review","handleCheckedListClick","lung","lobe","featureLabelG","noduleSize","Option","Select","NoduleInfo","noduleInfo","Group","checkNoduleList","target","value","val","placeholder","marginTop","handleTextareaOnChange","onBlur","handleInputBlur","suggest","marginRight","updateNoduleList","defaultColor","activeColor","fillColor","toolColors","setFillColor","color","getFillColor","setToolColor","getToolColor","setActiveColor","getActiveColor","getColorIfActive","defaultWidth","activeWidth","toolStyle","setToolWidth","getToolWidth","setActiveWidth","getActiveWidth","getToolState","element","toolName","cornerstone","getEnabledElement","toolStateManager","getElementToolStateManager","get","rotatePoint","point","center","angle","angleRadians","Math","PI","x","cos","sin","y","path","context","options","fn","lineWidth","fillStyle","lineDash","shouldDrawLines","beginPath","strokeStyle","setLineDash","fill","stroke","drawRect","corner1","corner2","coordSystem","initialRotation","pixelToCanvas","viewport","getViewport","scale","translation","rotation","centerPoint","abs","w","min","corner3","corner4","moveTo","lineTo","MarkNoduleTool","defaultProps","name","supportedInteractionTypes","configuration","drawHandles","drawHandlesOnHover","hideHandlesIfMoving","renderDashed","eventData","visible","invalidated","handles","start","currentPoints","image","highlight","end","coords","interactionType","evt","toolData","currentTarget","this","localStorage","setItem","detail","save","restore","draw","canvas","getContext","setTransform","getNewContext","canvasContext","rectOptions","csTools","importInternal","MarkDialog","radioVal","setRadioVal","selectVal","setSelectVal","setDisabled","handleCloseCallback","defaultValue","handleSubmitCallback","getURLParameters","url","match","reduce","v","slice","basicUrl","href","axios","defaults","headers","common","token","Viewer","mode","modeOptions","mouseButtonMask","setImagesConfig","setNoduleList","originNoduleList","setOriginNoduleList","patients","setPatients","noduleMapList","setNoduleMapList","setNoduleInfo","setPageType","setPageState","setImageIdIndex","fetchAdminData","result","code","JSON","parse","formatNodeData","fetcImagehData","fetchDoctorData","doctorId","doctorTask","resultInfo","imageResult","nodelist","resource","res","setImageList","user","page","Number","fetchData","records","indeterminate","setIndeterminate","checkAll","setCheckAll","cornerstoneElement","setCornerstoneElement","showPopover","setShowPopover","newList","imageList","forEach","ossUrl","loadAndCacheImage","changeActiveImage","loadImage","then","displayImage","cornerstoneTools","addStackStateManager","addToolState","currentImageIdIndex","showMark","setShowMark","windowChange","viewportDefault","getDefaultViewportForImage","voiLUT","voi","setViewport","nodulesList","nodulesMapList","detectionResult","coord","coordZ","diameter","featureLabel","risk","scrynMaligant","toFixed","soak","info","noduleName","noduleNum","invisable","edit","lungLocation","lobeLocation","j","rois","key","startX","bbox","startY","endX","endY","taskPool","imageId","showState","setShowState","setVisible","formatPostData","postData","taskId","findIndex","edit_time","Date","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","stringify","saveResults","params","post","message","success","error","every","warning","handleVisibleChange","handleHideNodule","checkItme","find","onCheckAllChange","setToolActive","changeToolActive","hflip","vflip","playClip","stopClip","addTool","newImage","curImageId","clearToolState","checkNode","measurementData","updateImage","addNodeTool","activeTool","querySelector","dataset","setActiveToolState","imageRenderedEvent","getItem","tool","mark","getElementById","classList","contains","showMarkDialog","checkState","pop","removeToolState","maskClosable","onOk","parent","postMessage","onCancel","okText","cancelText","maskStyle","backgroundColor","dataSource","day","date","mm","fps","columns","dataIndex","StudyList","useHistory","onRow","record","onDoubleClick","event","CollectionCreateForm","onCreate","Form","useForm","form","validateFields","values","resetFields","catch","labelCol","span","initialValues","remember","Item","label","rules","required","time","content","mmark","component","IndexComponent","Router","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","external","Hammer","cornerstoneMath","init","textStyle","setFont","store","touchProximity","cornerstoneWADOImageLoader","dicomParser","webWorkerManager","initialize","maxWebWorkers","navigator","hardwareConcurrency","startWebWorkersOnDemand","taskConfiguration","decodeTask","initializeCodecsOnStartup","usePDFJS","strict","ReactDOM","render"],"mappings":"wFACC,SAASA,GAAG,IAAIC,EAAEC,EAAEC,EAAEC,EAAEC,EAAEC,EAAE,4mYAA4mYC,GAAGA,EAAEC,SAASC,qBAAqB,WAAWF,EAAEG,OAAO,GAAGC,aAAa,kBAAkE,GAAGJ,IAAIP,EAAEY,6BAA6B,CAACZ,EAAEY,8BAA6B,EAAG,IAAIJ,SAASK,MAAM,oIAAoI,MAAMb,GAAGc,SAASA,QAAQC,IAAIf,IAAI,SAASgB,IAAIX,IAAIA,GAAE,EAAGF,KAAmGF,EAAE,WAAW,IAAID,EAAEC,GAAGA,EAAEO,SAASS,cAAc,QAAQC,UAAUZ,EAAEA,EAAE,MAAMN,EAAEC,EAAEQ,qBAAqB,OAAO,MAAMT,EAAEmB,aAAa,cAAc,QAAQnB,EAAEoB,MAAMC,SAAS,WAAWrB,EAAEoB,MAAME,MAAM,EAAEtB,EAAEoB,MAAMG,OAAO,EAAEvB,EAAEoB,MAAMI,SAAS,SAASvB,EAAED,GAAGA,EAAEQ,SAASiB,MAAMC,WAA5qB,SAAS1B,EAAEC,GAAGA,EAAE0B,WAAWC,aAAa5B,EAAEC,GAA6oB4B,CAAE5B,EAAED,EAAE0B,YAAY1B,EAAE8B,YAAY7B,KAAKO,SAASuB,kBAAkB,CAAC,WAAW,SAAS,eAAeC,QAAQxB,SAASyB,YAAYC,WAAWjC,EAAE,IAAIC,EAAE,WAAWM,SAAS2B,oBAAoB,mBAAmBjC,GAAE,GAAID,KAAKO,SAASuB,iBAAiB,mBAAmB7B,GAAE,IAAKM,SAAS4B,cAAcjC,EAAEF,EAAEG,EAAEJ,EAAEQ,SAASH,GAAE,EAApqB,SAASgC,IAAI,IAAIjC,EAAEkC,gBAAgBC,SAAS,QAAQ,MAAMvC,GAAG,YAAYkC,WAAWG,EAAE,IAAIrB,IAA6kBqB,GAAIjC,EAAEoC,mBAAmB,WAAW,YAAYpC,EAAE6B,aAAa7B,EAAEoC,mBAAmB,KAAKxB,OAA9ya,CAAszayB,S,6WCGxyaC,iBACbC,aAAW,SAAwBC,GAIjC,MAHgC,MAA5BA,EAAMC,SAASC,UACjBF,EAAMG,QAAQC,KAAK,cAGnB,mCACE,qBAAKC,UAAU,UAAf,SAA0BC,YAAaN,EAAMO,MAAMC,gB,iECmB5CC,EA1BA,SAAAT,GAAU,IAAD,EACtB,OACE,sBAAKK,UAAU,aAAf,UACE,qBAAKA,UAAU,eAAf,UACG,UAAAL,EAAMU,YAAN,eAAYC,aACX,sBAAKN,UAAU,iBAAf,UACE,sDAAUL,EAAMU,KAAKC,YAArB,YACA,sDAAUX,EAAMU,KAAKE,gBAArB,YACA,sDAAUZ,EAAMU,KAAKG,IAArB,YACA,kEAAYb,EAAMU,KAAKI,gBAAvB,YACA,mDAAiBd,EAAMU,KAAKK,UAA5B,YACA,kEAAYf,EAAMU,KAAKM,iBAEvB,OAEc,WAAnBhB,EAAMiB,SACL,qBAAKZ,UAAU,SAAf,SACE,cAAC,IAAD,CAAQa,SAA8B,UAApBlB,EAAMmB,UAAuBC,KAAK,UAAUC,QAASrB,EAAMsB,gBAA7E,oDAIA,S,+DClBKC,EAJEC,YAAqB,CACpCC,UAAW,CAAEC,gB,QCCTC,EAAc,CAClB,CACEC,GAAI,EACJC,KAAM,2BACNC,KAAM,cAAC,EAAD,CAAUtD,MAAO,CAAEuD,SAAU,QAAUX,KAAK,uBAClDA,KAAM,WACNY,SAAS,EACTC,QAAQ,GAEV,CACEL,GAAI,EACJC,KAAM,2BACNC,KAAM,cAAC,EAAD,CAAUtD,MAAO,CAAEuD,SAAU,QAAUX,KAAK,mBAClDA,KAAM,QACNY,SAAS,EACTC,QAAQ,GAEV,CACEL,GAAI,EACJC,KAAM,2BACNC,KAAM,cAAC,EAAD,CAAUtD,MAAO,CAAEuD,SAAU,QAAUX,KAAK,kBAClDA,KAAM,QACNY,SAAS,EACTC,QAAQ,GAEV,CACEL,GAAI,EACJC,KAAM,eACNC,KAAM,cAAC,EAAD,CAAUtD,MAAO,CAAEuD,SAAU,QAAUX,KAAK,gBAClDA,KAAM,UACNY,SAAS,GASX,CACEJ,GAAI,EACJR,KAAM,MAER,CACEQ,GAAI,EACJC,KAAM,eACNC,KAAM,cAAC,EAAD,CAAUtD,MAAO,CAAEuD,SAAU,QAAUX,KAAK,kBAClDA,KAAM,gBACNY,SAAS,GAEX,CACEJ,GAAI,EACJC,KAAM,eACNC,KAAM,cAAC,EAAD,CAAUtD,MAAO,CAAEuD,SAAU,QAAUX,KAAK,gBAClDA,KAAM,eACNY,SAAS,GAEX,CACEJ,GAAI,EACJC,KAAM,2BACNC,KAAM,cAAC,EAAD,CAAUtD,MAAO,CAAEuD,SAAU,QAAUX,KAAK,uBAClDA,KAAM,QACNY,SAAS,GAEX,CACEJ,GAAI,GACJC,KAAM,eACNC,KAAM,cAAC,EAAD,CAAUtD,MAAO,CAAEuD,SAAU,QAAUX,KAAK,kBAClDA,KAAM,SACNY,SAAS,GAEX,CACEJ,GAAI,GACJC,KAAM,eACNC,KAAM,cAAC,EAAD,CAAUtD,MAAO,CAAEuD,SAAU,QAAUX,KAAK,wBAClDA,KAAM,SACNY,SAAS,IAsDEE,EA3CC,SAAAlC,GACd,MAA0BmC,mBAASR,GAAnC,mBAAOS,EAAP,KAAcC,EAAd,KAmBA,OACE,oBAAIhC,UAAU,eAAd,SACGsB,EAAYW,KAAI,SAACC,EAAMC,GACtB,MAAqB,OAAdD,EAAKnB,KACV,oBAAkBf,UAAU,KAA5B,SACE,yBADOkC,EAAKX,IAId,oBACEA,GAAkB,eAAdW,EAAKnB,MAAyBmB,EAAKP,QAAU,OAAS,KAE1D3B,UAAWkC,EAAKP,QAAWO,EAAKN,OAAS,gBAAkB,SAAY,GACvEZ,QAAS,SAAA9D,GAAC,OA7BO,SAACA,EAAGiF,EAAOpB,GACvB,aAATA,GAAgC,UAATA,GAA6B,UAATA,GAC7CgB,EAAMI,GAAOR,SAAWI,EAAMI,GAAOR,QACrCK,EAAS,YAAID,MAEbA,EAAMI,GAAOR,SAAWI,EAAMI,GAAOR,QACrCI,EAAME,KAAI,SAAAC,GACJA,EAAKnB,OAASA,GAAsB,aAAdmB,EAAKnB,MAAqC,UAAdmB,EAAKnB,MAAkC,UAAdmB,EAAKnB,OAClFmB,EAAKP,SAAU,MAEnBK,EAAS,YAAID,KAIfpC,EAAMyC,mBAAmBrB,EAAMgB,EAAMI,GAAOR,SAetBS,CAAmBlF,EAAGiF,EAAOD,EAAKnB,OAChD,YAAWmB,EAAKnB,KALlB,SAOE,cAAC,IAAD,CAASsB,MAAOH,EAAKV,KAArB,SAA4BU,EAAKT,QAL5BS,EAAKX,UCpGPe,G,OAnBO,SAAA3C,GACpB,OACE,qBAAIK,UAAU,qBAAd,UACE,gEACO,+BAAOL,EAAM4C,gBAEpB,0DACM,+BAAO5C,EAAM6C,eAEnB,oDACK,iCAAO7C,EAAM8C,YAAb,YAEL,oDACK,iCAAO9C,EAAM+C,aAAb,iB,SCqBIC,EA7BI,SAAAhD,GACjB,IAAMiD,ECPO,WACb,MAAwBd,mBAAS,CAC/BzD,MAAOd,SAAS8B,gBAAgBwD,YAChCvE,OAAQf,SAAS8B,gBAAgByD,eAFnC,mBAAOF,EAAP,KAAaG,EAAb,KAKMC,EAAWC,uBAAY,WAC3BF,EAAQ,CACN1E,MAAOd,SAAS8B,gBAAgBwD,YAChCvE,OAAQf,SAAS8B,gBAAgByD,iBAElC,IASH,OAPAI,qBAAU,WAER,OADA1D,OAAOV,iBAAiB,SAAUkE,GAC3B,WACLxD,OAAON,oBAAoB,SAAU8D,MAEtC,CAACA,IAEGJ,EDbMO,GACb,OACE,qBAAKnD,UAAU,kBAAf,SACiC,IAA9BL,EAAMyD,aAAa3F,OAClB,qBAAKuC,UAAU,aAAf,SACE,cAAC,IAAD,CAAMqD,IAAI,mEAGZ,gCACE,cAAC,EAAD,CAASjB,mBAAoBzC,EAAMyC,qBACnC,cAAC,IAAD,CACEkB,aAAc3D,EAAM2D,aACpBC,yBAA0BjB,EAC1BkB,iBAAkB,SAAAC,GAAiB,OAAI9D,EAAM+D,wBAAwBD,IACrEE,MAAOhE,EAAMiE,YACbC,SAAUlE,EAAMyD,aAChBjF,MAAO,CACL2F,SAAU,OACVxF,OAA2B,WAAnBqB,EAAMiB,SAAN,UAAiCgC,EAAKtE,OAAtC,gBAAsDsE,EAAKtE,OAAS,GAApE,MACRyF,KAAM,a,0BEiFLC,GAxGMC,IAAbC,SAEgB,SAAAvE,GAAU,IAAD,IAK/B,OACE,sBAAKK,UAAU,wBAAf,UACE,sBAAKA,UAAU,kBAAf,UACE,sBAAKA,UAAU,QAAf,2CAA6BL,EAAMwE,WAAW1G,OAA9C,YACA,sBAAKuC,UAAU,YAAf,UACE,sBAAKA,UAAU,cAAf,UAOE,cAAC,IAAD,CAAUa,UAAQ,EAACc,SAAS,EAA5B,SACE,qBAAK3B,UAAU,MAAf,kCAEF,qBAAKA,UAAU,OAAf,0CACA,qBAAKA,UAAU,OAAf,0BAEA,qBAAKA,UAAU,OAAf,0BACA,qBAAKA,UAAU,SAAf,6BAEF,qBAAKuB,GAAG,gBAAgBvB,UAAU,gBAAlC,mBACGL,EAAMwE,kBADT,aACG,EAAkBlC,KAAI,SAACC,EAAMC,GAAP,OACrB,sBAEEnC,UAAS,qBAAgBkC,EAAKkC,OAAS,cAAgB,IACvDpD,QAAS,SAAA9D,GAAC,OA9BA,SAACiF,EAAOkC,GAC9B1E,EAAM2E,cAAcnC,EAAOkC,GA6BDE,CAAgBpC,EAAOD,EAAKmC,MAH5C,UAME,cAAC,IAAD,CAAUG,SAAU,SAAAtH,GAAC,OAAIyC,EAAM2E,cAAcnC,EAAOD,EAAKmC,MAAM1C,QAASO,EAAKP,QAA7E,SACE,qBAAK3B,UAAU,MAAf,SAAsBkC,EAAKmC,QAE7B,qBAAKrE,UAAU,OAAf,SAAuBkC,EAAKU,KAAK6B,QAAQ,KAAM,MAC/C,qBAAKzE,UAAU,OAAf,SAAuBkC,EAAKnB,OAE5B,qBAAKf,UAAU,OAAf,SACE,oCAAsB0E,IAAfxC,EAAKH,MAAsB,IAAMG,EAAKH,MAAQ,SAAM,aAE7D,qBAAK/B,UAAU,sBAAf,SACE,sBAAMA,UAAWkC,EAAKyC,OAAS,SAAW,KAA1C,UAAiE,IAAhBzC,EAAKyC,OAAkB,qBAAQ,2BAf7EzC,EAAKX,eAsBpB,sBAAKvB,UAAU,iBAAf,UACE,qBAAKA,UAAU,QAAf,sCACA,qBAAKA,UAAU,WAAf,SACE,sBAAKA,UAAU,aAAf,UACE,qBAAKA,UAAU,QAAf,sCACA,qBAAKuB,GAAG,gBAAgBvB,UAAU,iBAAlC,mBACGL,EAAMwE,kBADT,aACG,EAAkBlC,KAAI,SAACC,EAAMC,GAC5B,OAAOD,EAAKP,QACV,sBAEE3B,UAAS,sBAAiBkC,EAAKkC,OAAS,cAAgB,IACxDpD,QAAS,SAAA9D,GAAC,OAAIyC,EAAMiF,uBAAuB1C,EAAKmC,MAHlD,oBAKI,+BAAOnC,EAAK2C,OALhB,IAK6B,+BAAO3C,EAAK4C,OALzC,uBAK0D,+BAAO5C,EAAK6C,gBAAsB,IAL5F,wCAMS,+BAAO7C,EAAKnB,OANrB,4BAMsC,+BAAOmB,EAAKU,OANlD,2BAMmE,IACjE,iCAAOV,EAAK8C,WAAZ,aAPF,WACO9C,EAAKX,IAQV,uB,4DCvEZ0D,EAAWC,IAAXD,OAmHOE,EAjHI,SAAAxF,GAAU,IAAD,EAgB1B,OACE,sBAAKK,UAAU,kBAAf,UACGL,EAAMyF,WACL,sBAAKpF,UAAU,gBAAf,UAKE,sBAAKA,UAAU,OAAf,UACE,sBAAMA,UAAU,aAAhB,0BACA,eAAC,IAAMqF,MAAP,CAAaxE,SAA8B,UAApBlB,EAAMmB,UAAuB0D,SAzBzC,SAAAtH,GACnByC,EAAM2F,gBAAgBpI,EAAEqI,OAAOC,MAAO,QACf,iBAAnBtI,EAAEqI,OAAOC,OAA4C,iBAA1B7F,EAAMyF,WAAWN,MAC9CnF,EAAM2F,gBAAgB,eAAM,SAsBsDE,MAAO7F,EAAMyF,WAAWP,KAApG,UACE,cAAC,IAAD,CAAOW,MAAO,eAAd,0BACA,cAAC,IAAD,CAAOA,MAAO,eAAd,gCAGJ,sBAAKxF,UAAU,OAAf,UACE,qBAAKA,UAAU,aAAf,gCACA,eAAC,IAAMqF,MAAP,CAAaxE,SAA8B,UAApBlB,EAAMmB,UAAuB0D,SAzBzC,SAAAtH,GACnByC,EAAM2F,gBAAgBpI,EAAEqI,OAAOC,MAAO,SAwB8CA,MAAO7F,EAAMyF,WAAWN,KAApG,UACE,cAAC,IAAD,CAAOU,MAAO,eAAd,0BAC2B,iBAA1B7F,EAAMyF,WAAWP,KAAgB,KAAO,cAAC,IAAD,CAAOW,MAAO,eAAd,0BACzC,cAAC,IAAD,CAAOA,MAAO,eAAd,gCAGJ,sBAAKxF,UAAU,OAAf,UACE,qBAAKA,UAAU,aAAf,gCACA,eAAC,IAAD,CACEa,SAA8B,UAApBlB,EAAMmB,UAChB8B,KAAK,QACL4C,MAAO7F,EAAMyF,WAAWrE,KACxB5C,MAAO,CAAEE,MAAO,IAAKqD,SAAU,IAC/B8C,SAlCe,SAAAiB,GACzB9F,EAAM2F,gBAAgBG,EAAK,SA4BnB,UAOE,cAACR,EAAD,CAAQO,MAAM,2BAAd,sCACA,cAACP,EAAD,CAAQO,MAAM,2BAAd,sCACA,cAACP,EAAD,CAAQO,MAAM,qBAAd,gCACA,cAACP,EAAD,CAAQO,MAAM,2BAAd,sCACA,cAACP,EAAD,CAAQO,MAAM,2BAAd,sCACA,cAACP,EAAD,CAAQO,MAAM,2BAAd,sCACA,cAACP,EAAD,CAAQO,MAAM,eAAd,gCAGJ,sBAAKxF,UAAU,OAAf,UACE,oDACA,cAAC,IAAD,CACEa,SAA8B,UAApBlB,EAAMmB,UAChB4E,YAAY,+DACZ9C,KAAK,QACLzE,MAAO,CAAEE,MAAO,IAAKC,OAAQ,GAAIqH,UAAW,EAAGjE,SAAU,IACzD8C,SAAU7E,EAAMiG,uBAChBC,OAAQlG,EAAMmG,gBACdN,MAAK,UAAE7F,EAAMyF,kBAAR,aAAE,EAAkBW,aAG7B,sBAAK/F,UAAU,OAAf,UACE,oDACCL,EAAMyF,WAAWxC,QAEpB,sBAAK5C,UAAU,OAAf,UACE,oDACCL,EAAMyF,WAAWJ,WAFpB,gBASA,KACHrF,EAAMyF,WACL,qBAAKpF,UAAU,cAAf,SACE,sBAAKA,UAAU,aAAf,UACE,kEACA,sBAAKA,UAAU,QAAf,UACE,cAAC,IAAD,CACEa,SAA8B,UAApBlB,EAAMmB,UAChBC,MAAiC,IAA3BpB,EAAMyF,WAAWrD,MAAkB,UAAY,KACrD5D,MAAO,CAAE6H,YAAa,QACtBpD,KAAK,QACL5B,QAAS,SAAA9D,GAAC,OAAIyC,EAAMsG,kBAAiB,IALvC,oBASA,cAAC,IAAD,CACEpF,SAA8B,UAApBlB,EAAMmB,UAChBC,MAAiC,IAA3BpB,EAAMyF,WAAWrD,MAAiB,UAAY,KACpDa,KAAK,QACL5B,QAAS,SAAA9D,GAAC,OAAIyC,EAAMsG,kBAAiB,IAJvC,4BAWJ,S,oCClHNC,EAAe,MACjBC,EAAc,MACdC,EAAY,cAkCd,IAUeC,EAVI,CACjBC,aAjCF,SAAsBC,GACpBH,EAAYG,GAiCZC,aA9BF,WACE,OAAOJ,GA8BPK,aA3BF,SAAsBF,GACpBL,EAAeK,GA2BfG,aAxBF,WACE,OAAOR,GAwBPS,eArBF,SAAwBJ,GACtBJ,EAAcI,GAqBdK,eAlBF,WACE,OAAOT,GAkBPU,iBAfF,SAA0BxG,GACxB,OAAIA,EAAKkG,MACAlG,EAAKkG,MAGPlG,EAAK+D,OAAS+B,EAAcD,ICjCjCY,EAAe,EACjBC,EAAc,EAkBhB,IAOeC,EAPG,CAChBC,aAjBF,SAAsB5I,GACpByI,EAAezI,GAiBf6I,aAdF,WACE,OAAOJ,GAcPK,eAXF,SAAwB9I,GACtB0I,EAAc1I,GAWd+I,eARF,WACE,OAAOL,ICbT,SAASM,EAAaC,EAASC,GAE7B,OAGF,SAAoCD,GAElC,OADuBE,IAAYC,kBAAkBH,GAC/BI,iBANGC,CAA2BL,GAC5BM,IAAIN,EAASC,GAoBvC,SAASM,EAAYC,EAAOC,EAAQC,GAClC,IAAMC,EAAeD,GAASE,KAAKC,GAAK,KAMxC,MAAO,CACLC,EALAF,KAAKG,IAAIJ,IAAiBH,EAAMM,EAAIL,EAAOK,GAAKF,KAAKI,IAAIL,IAAiBH,EAAMS,EAAIR,EAAOQ,GAAKR,EAAOK,EAMvGG,EAJAL,KAAKI,IAAIL,IAAiBH,EAAMM,EAAIL,EAAOK,GAAKF,KAAKG,IAAIJ,IAAiBH,EAAMS,EAAIR,EAAOQ,GAAKR,EAAOQ,GAQ3G,SAASC,GAAKC,GAA4B,IAAnBC,EAAkB,uDAAR,GAAIC,EAAI,uCAC/BpC,EAAkEmC,EAAlEnC,MAAOqC,EAA2DF,EAA3DE,UAAWC,EAAgDH,EAAhDG,UAAWC,EAAqCJ,EAArCI,SAArC,EAA0EJ,EAA3BK,uBAA/C,SAEAN,EAAQO,YACRP,EAAQQ,YAAc1C,GAASkC,EAAQQ,YAEvCR,EAAQG,UAAYA,QAA4BlE,IAAdkE,GAA2B5B,EAAUE,gBAAmBuB,EAAQG,UAC9FE,GACFL,EAAQS,YAAYJ,GAGtBH,EAAGF,GAECI,IACFJ,EAAQI,UAAYA,EACpBJ,EAAQU,QAGNJ,GACFN,EAAQW,SAGNN,GACFL,EAAQS,YAAY,IAIxB,SAASG,GAASZ,EAASnB,EAASgC,EAASC,EAASb,GAAwD,IAA/Cc,EAA8C,uDAAhC,QAASC,EAAuB,uDAAL,EAClF,UAAhBD,IACFF,EAAU9B,IAAYkC,cAAcpC,EAASgC,GAC7CC,EAAU/B,IAAYkC,cAAcpC,EAASiC,IAG/C,IAAMI,EAAWnC,IAAYoC,YAAYtC,GAGpBjJ,EAAgCiJ,EAA7CzE,YAAkCvE,EAAWgJ,EAAzBxE,aACpB+G,EAAuBF,EAAvBE,MAAOC,EAAgBH,EAAhBG,YACTC,EAAWJ,EAASI,SAAWN,EAE/BO,EAAc,CAClB5B,EAAG/J,EAAQ,EAAIyL,EAAY1B,EAAIyB,EAC/BtB,EAAGjK,EAAS,EAAIwL,EAAYvB,EAAIsB,GAG9B3B,KAAK+B,IAAIF,GAAY,MACvBT,EAAUzB,EAAYyB,EAASU,GAAcD,GAC7CR,EAAU1B,EAAY0B,EAASS,GAAcD,IAG/C,IAAMG,EAAIhC,KAAK+B,IAAIX,EAAQlB,EAAImB,EAAQnB,GACjCjL,EAAI+K,KAAK+B,IAAIX,EAAQf,EAAIgB,EAAQhB,GAEvCe,EAAU,CACRlB,EAAGF,KAAKiC,IAAIb,EAAQlB,EAAGmB,EAAQnB,GAC/BG,EAAGL,KAAKiC,IAAIb,EAAQf,EAAGgB,EAAQhB,IAGjCgB,EAAU,CACRnB,EAAGkB,EAAQlB,EAAI8B,EACf3B,EAAGe,EAAQf,EAAIpL,GAGjB,IAAIiN,EAAU,CACZhC,EAAGkB,EAAQlB,EAAI8B,EACf3B,EAAGe,EAAQf,GAGT8B,EAAU,CACZjC,EAAGkB,EAAQlB,EACXG,EAAGe,EAAQf,EAAIpL,GAGb+K,KAAK+B,IAAIF,GAAY,MACvBT,EAAUzB,EAAYyB,EAASU,EAAaD,GAC5CR,EAAU1B,EAAY0B,EAASS,EAAaD,GAC5CK,EAAUvC,EAAYuC,EAASJ,EAAaD,GAC5CM,EAAUxC,EAAYwC,EAASL,EAAaD,IAG9CvB,GAAKC,EAASC,GAAS,SAAAD,GACrBA,EAAQ6B,OAAOhB,EAAQlB,EAAGkB,EAAQf,GAClCE,EAAQ8B,OAAOH,EAAQhC,EAAGgC,EAAQ7B,GAClCE,EAAQ8B,OAAOhB,EAAQnB,EAAGmB,EAAQhB,GAClCE,EAAQ8B,OAAOF,EAAQjC,EAAGiC,EAAQ9B,GAClCE,EAAQ8B,OAAOjB,EAAQlB,EAAGkB,EAAQf,MCvHtC,IAEqBiC,G,kDACnB,aAAyB,IAAb7K,EAAY,uDAAJ,GAAI,oBACtB,IAAM8K,EAAe,CACnBC,KAAM,aACNC,0BAA2B,CAAC,SAC5BC,cAAe,CACbC,aAAa,EACbC,oBAAoB,EACpBC,qBAAqB,EACrBC,cAAc,IARI,mBAYhBrL,EAAO8K,G,0DAGf,SAAuBvN,M,kCAIvB,SAAqB+N,GACnB,MAAO,CACLC,SAAS,EACT9G,QAAQ,EACRmC,WAAO7B,EACPyG,aAAa,EACbC,QAAS,CACPC,MAAO,CACLjD,EAAG6C,EAAUK,cAAcC,MAAMnD,EACjCG,EAAG0C,EAAUK,cAAcC,MAAMhD,EACjCiD,WAAW,EACXpH,QAAQ,GAEVqH,IAAK,CACHrD,EAAG6C,EAAUK,cAAcC,MAAMnD,EACjCG,EAAG0C,EAAUK,cAAcC,MAAMhD,EACjCiD,WAAW,EACXpH,QAAQ,O,2BAMhB,SAAckD,EAASjH,EAAMqL,EAAQC,GACnC,OAAO,I,+BAGT,SAAkBJ,EAAOjE,EAASjH,M,4BASlC,SAAeuL,GACb,IAAMC,EAAWxE,EAAauE,EAAIE,cAAeC,KAAKrB,MAGtD,GAFAsB,aAAaC,QAAQ,SAAU,SAE1BJ,EAAL,CAIIA,EAASxL,KAAK,GAChB2L,aAAaC,QAAQ,SAAU,QAE/BD,aAAaC,QAAQ,SAAU,SAGjC,IAAMhB,EAAYW,EAAIM,OACd5E,EAAY2D,EAAZ3D,SD1DZ,SAAcmB,EAASE,GACrBF,EAAQ0D,OACRxD,EAAGF,GACHA,EAAQ2D,UC0DNC,CDnEJ,SAAuBC,GACrB,IAAM7D,EAAU6D,EAAOC,WAAW,MAElC,OADA9D,EAAQ+D,aAAa,EAAG,EAAG,EAAG,EAAG,EAAG,GAC7B/D,EC8DWgE,CAAcxB,EAAUyB,cAAcJ,SAExC,SAAA7D,GAEZ,IAAK,IAAIrL,EAAI,EAAGA,EAAIyO,EAASxL,KAAK5C,OAAQL,IAAK,CAC7C,IAAMiD,EAAOwL,EAASxL,KAAKjD,GAE3B,IAAqB,IAAjBiD,EAAK6K,QAAT,CAKA,IAEMyB,EAAc,CAAEpG,MAFRF,EAAWQ,iBAAiBxG,IAK1CgJ,GACEZ,EACAnB,EACAjH,EAAK+K,QAAQC,MACbhL,EAAK+K,QAAQK,IACbkB,EACA,QACAtM,EAAK+K,QAAQ3B,2B,GAlGImD,IAAQC,eAAe,4BCE1C5H,I,OAAWC,IAAXD,QAmEO6H,GAjEI,SAAAnN,GACjB,MAAgCmC,mBAAS,GAAzC,mBAAOiL,EAAP,KAAiBC,EAAjB,KACA,EAAkClL,mBAAS,MAA3C,mBAAOmL,EAAP,KAAkBC,EAAlB,KACA,EAAgCpL,oBAAS,GAAzC,mBAAOjB,EAAP,KAAiBsM,EAAjB,KAqBA,OACE,qBAAKnN,UAAU,mBAAf,SACE,sBAAKA,UAAU,kBAAf,UACE,sBAAKA,UAAU,aAAf,UACE,4DACA,sBAAMA,UAAU,QAAQgB,QAbR,WACtBrB,EAAMyN,uBAYA,SACE,cAAC,EAAD,CAAUjP,MAAO,CAAEuD,SAAU,QAAUX,KAAK,0BAGhD,qBAAKf,UAAU,eAAf,SACE,eAAC,IAAMqF,MAAP,CAAab,SA7BK,SAAAtH,GACxB8P,EAAY9P,EAAEqI,OAAOC,QA4B2BA,MAAOuH,EAAjD,UACE,cAAC,IAAD,CAAOlM,SAAU,WAAY2E,MAAO,EAApC,4BAGA,cAAC,IAAD,CAAOA,MAAO,EAAd,2CAGJ,qBAAKxF,UAAU,iBAAf,SACgB,IAAb+M,EACC,sBAAK/M,UAAU,UAAf,UACE,cAAC,IAAD,CAAQe,KAAK,UAAb,sCACA,cAAC,IAAD,CAAQA,KAAK,UAAb,2DAGF,sBAAKf,UAAU,UAAf,UACE,eAAC,IAAD,CAAQqN,aAAa,6CAAUlP,MAAO,CAAEE,MAAO,KAAOmG,SAxCvC,SAAAgB,GACzB0H,EAAa1H,GACTA,GACF2H,GAAY,IAqCJ,UACE,cAAC,GAAD,CAAQ3H,MAAM,IAAd,sCACA,cAAC,GAAD,CAAQA,MAAM,IAAd,sCACA,cAAC,GAAD,CAAQA,MAAM,IAAd,mCAEF,cAAC,IAAD,CAAQ3E,SAAUA,EAAUE,KAAK,UAAUC,QAlC7B,WACxBrB,EAAM2N,qBAAqBL,IAiCjB,qC,oBC7DDM,GAAmB,SAAAC,GAAG,OAChCA,EAAIC,MAAM,yBAA2B,IAAIC,QACxC,SAAC3Q,EAAG4Q,GAAJ,OAAY5Q,EAAE4Q,EAAEC,MAAM,EAAGD,EAAE5O,QAAQ,OAAS4O,EAAEC,MAAMD,EAAE5O,QAAQ,KAAO,GAAKhC,IAC1E,KCDE8Q,GAAWN,GAAiB/N,OAAOI,SAASkO,MAAMN,IACxDO,KAAMC,SAASC,QAAQC,OAAO,kBAAoBX,GAAiB/N,OAAOI,SAASkO,MAAMK,MAQlF,I,oBC+0BQC,GA50BA,WACb,IAmCA,EAAsCtM,mBAnCjB,CACnB,CACE4I,KAAM,OACN2D,KAAM,SACNC,YAAa,CAAEC,gBAAiB,IAElC,CAAE7D,KAAM,wBAAyB2D,KAAM,UACvC,CACE3D,KAAM,eACN4D,YAAa,CAAEC,gBAAiB,IAElC,CACE7D,KAAM,SACN4D,YAAa,CAAEC,gBAAiB,IAElC,CACE7D,KAAM,UACN4D,YAAa,CAAEC,gBAAiB,IAElC,CACE7D,KAAM,gBACN4D,YAAa,CAAEC,gBAAiB,IAElC,CACE7D,KAAM,QACN4D,YAAa,CAAEC,gBAAiB,IAElC,CACE7D,KAAM,SACN4D,YAAa,CAAEC,gBAAiB,MAMpC,mBAAO3K,EAAP,KACA,GADA,KACwC9B,mBAAS,KAAjD,mBAAOsB,EAAP,KAAqBoL,EAArB,KAEA,EAAoC1M,mBAAS,GAA7C,mBAEA,GAFA,UAEiDA,mBAAS,KAA1D,mBACA,GADA,UACoCA,mBAAS,KAA7C,mBAAOqC,EAAP,KAAmBsK,EAAnB,KACA,EAAgD3M,mBAAS,IAAzD,mBAAO4M,EAAP,KAAyBC,EAAzB,KAEA,EAAgC7M,mBAAS,IAAzC,mBAAO8M,EAAP,KAAiBC,EAAjB,KACA,EAA0C/M,mBAAS,IAAnD,mBAAOgN,EAAP,KAAsBC,EAAtB,KAGA,EAAoCjN,mBAAS,MAA7C,mBAAOsD,EAAP,KAAmB4J,EAAnB,KAGA,EAAgClN,mBAAS,IAAzC,mBAAOlB,EAAP,KAAiBqO,EAAjB,KACA,EAAkCnN,mBAAS,IAA3C,mBAAOhB,EAAP,KAAkBoO,EAAlB,KAGA,EAAwCpN,mBAAS,GAAjD,mBAAOwB,GAAP,KAAqB6L,GAArB,KAGAjM,qBAAU,WAER,IAAMkM,EAAc,uCAAG,8BAAArS,EAAA,sEDlDAwE,ECmDYgM,GAAiB/N,OAAOI,SAASkO,MAAMvM,GDnD7CwM,KAAMnG,IAAN,UAAaiG,GAAb,wCAAqDtM,ICkD3D,OAEI,OADnB8N,EADe,QAEVhP,KAAKiP,MACVD,EAAOhP,KAAKgP,SACRhP,EAAOkP,KAAKC,MAAMH,EAAOhP,KAAKgP,OAAO7N,KAAKiD,QAAQ,KAAM,MAC9DgL,GAAepP,EAAM,IACrBqP,KANiB,iCDlDA,IAAAnO,ICkDA,OAAH,qDAYdoO,EAAe,uCAAG,kCAAA5S,EAAA,sED3DCwE,EC4DYgM,GAAiB/N,OAAOI,SAASkO,MAAM8B,SD5D7C7B,KAAMnG,IAAN,UAAaiG,GAAb,sCAAmDtM,IC2D1D,OAEG,OADnB8N,EADgB,QAEXhP,KAAKiP,MACVD,EAAOhP,KAAKgP,SACVA,EAAOhP,KAAKgP,OAAOQ,WAAWC,YAC1BzP,EAAOkP,KAAKC,MAAMH,EAAOhP,KAAKgP,OAAOU,YAAYtL,QAAQ,KAAM,MAC/DqL,EAAaP,KAAKC,MAAMH,EAAOhP,KAAKgP,OAAOQ,WAAWC,WAAWrL,QAAQ,KAAM,MACrFgL,GAAepP,EAAMyP,EAAWE,UAChCN,MAEMrP,EAAOkP,KAAKC,MAAMH,EAAOhP,KAAKgP,OAAOU,YAAYtL,QAAQ,KAAM,MACrEgL,GAAepP,EAAM,IACrBqP,MAZgB,iCD3DC,IAAAnO,IC2DD,OAAH,qDAkBfmO,EAAc,uCAAG,4BAAA3S,EAAA,sED1FCkT,EC2FS1C,GAAiB/N,OAAOI,SAASkO,MAAMmC,SD1F1ElC,KAAMnG,IAAN,UACKiG,GADL,8GACmHoC,ICwF1F,OACfC,EADe,OAErBC,GAAaD,GAFQ,iCD1FC,IAAAD,IC0FD,OAAH,qDAiBpB,GAZoD,UAAhD1C,GAAiB/N,OAAOI,SAASkO,MAAMsC,KACzChB,IACU7B,GAAiB/N,OAAOI,SAASkO,MAAMsC,KAGjDT,IAFAD,IAKmD,UAAjDnC,GAAiB/N,OAAOI,SAASkO,MAAM/L,OACzCmN,EAAa,SAGqC,WAAhD3B,GAAiB/N,OAAOI,SAASkO,MAAMuC,KACzCpB,EAAY,eACP,GAAoD,UAAhD1B,GAAiB/N,OAAOI,SAASkO,MAAMuC,KAChDpB,EAAY,cACP,GAAoD,WAAhD1B,GAAiB/N,OAAOI,SAASkO,MAAMuC,KAAmB,CACnEpB,EAAY,UACZ,IAAM9M,EAAQoL,GAAiB/N,OAAOI,SAASkO,MAAM3L,MAEnDgN,GADEhN,EACcmO,OAAOnO,GAAS,EAEhB,MAInB,IAGHe,qBAAU,cAEP,IAGHA,qBAAU,WACR,IAAMqN,EAAS,uCAAG,4BAAAxT,EAAA,sED5HSwE,EC6HYgM,GAAiB/N,OAAOI,SAASkO,MAAMmC,SD5HhFlC,KAAMnG,IAAN,UAAaiG,GAAb,kFAA+FtM,IC2H3E,OAGS,OAFnB8N,EADU,QAGLhP,KAAKiP,MAAgBD,EAAOhP,KAAKgP,QAC1CR,EAAYQ,EAAOhP,KAAKgP,OAAOmB,QAAQ,IAJzB,iCD5HS,IAAAjP,IC4HT,OAAH,qDAOqC,UAAhDgM,GAAiB/N,OAAOI,SAASkO,MAAMuC,MACzCE,MAGD,IAGH,OAA0CzO,oBAAS,GAAnD,qBAAO2O,GAAP,MAAsBC,GAAtB,MACA,GAAgC5O,oBAAS,GAAzC,qBAAO6O,GAAP,MAAiBC,GAAjB,MAGA,GAAoD9O,mBAAS,MAA7D,qBAAO+O,GAAP,MAA2BC,GAA3B,MAGA,GAAsChP,mBAAS,CAC7CK,MAAO,EACP+I,SAAS,IAFX,qBAAO6F,GAAP,MAAoBC,GAApB,MAqEMb,GAAe,SAAAD,GACnB,GAAsB,MAAlBA,EAAI7P,KAAKiP,MAAgBY,EAAI7P,KAAKgP,OAAO5R,OAAS,EAAG,CACvD,IAAMwT,EAAUf,EAAI7P,KAAKgP,OACnB6B,EAAY,GAClBD,EAAQE,SAAQ,SAAAjP,GACdgP,EAAUnR,KAAV,kBAA0BmC,EAAKkP,OAAO3M,QAAQ,UAAW,iBAG3D+J,EAAgB0C,GAGZ3D,GAAiB/N,OAAOI,SAASkO,MAAMsC,MACrCc,EAAUzT,OAAS,GACrB4T,GAAkB7J,IAAa0J,KA8DjCtM,GAAyB,SAAAzC,GAazB0O,IACFS,GAAkBnP,EAAO0O,KA8HvBS,GAAoB,SAACnP,EAAO0O,GAChCrJ,IAAY+J,UAAUnO,EAAajB,EAAQ,IAAIqP,MAAK,SAAAjG,GAClD/D,IAAYiK,aAAaZ,EAAoBtF,GAC7CmG,IAAiBC,qBAAqBd,EAAoB,CAAC,UAC3Da,IAAiBE,aAAaf,EAAoB,QAAS,CACzDgB,oBAAqBvB,OAAOnO,EAAQ,GACpC0B,SAAUT,QAMhB,GAAgCtB,oBAAS,GAAzC,qBAAOgQ,GAAP,MAAiBC,GAAjB,MAuFMC,GAAe,SAAC1K,EAASiE,EAAOpJ,GAQpC,IAAM8P,EAAkBzK,IAAY0K,2BAA2B5K,EAASiE,GAClE5B,EAAWnC,IAAYoC,YAAYtC,GACzCqC,EAASwI,YAASzN,EAEJ,IAAVvC,GACFwH,EAASyI,IAAI3P,YAAcwP,EAAgBG,IAAI3P,YAC/CkH,EAASyI,IAAI1P,aAAeuP,EAAgBG,IAAI1P,cAC7B,IAAVP,GACTwH,EAASyI,IAAI3P,YAAc,KAC3BkH,EAASyI,IAAI1P,cAAgB,KACV,IAAVP,GACTwH,EAASyI,IAAI3P,YAAc,IAC3BkH,EAASyI,IAAI1P,aAAe,IACT,IAAVP,GACTwH,EAASyI,IAAI3P,YAAc,IAC3BkH,EAASyI,IAAI1P,aAAe,KACT,IAAVP,IACTwH,EAASyI,IAAI3P,YAAc,IAC3BkH,EAASyI,IAAI1P,aAAe,IAG9B8E,IAAY6K,YAAY/K,EAASqC,IA4B7B8F,GAAiB,SAACpP,EAAMyP,GAC5B,IAAMwC,EAAc,GACdC,EAAiB,GACnBpQ,EAAQ,EACZ,GAAkB,MAAd9B,EAAKiP,KAAgB,CACvBX,EAAoB,YAAItO,EAAKmS,gBAAgBF,cAG7C,IAFA,IAAMpC,EAAM7P,EAAKmS,gBAAgBF,YAExBlV,EAAI,EAAGA,EAAI8S,EAAIzS,OAAQL,IAC9BkV,EAAYvS,KAAK,CACfwB,GAAIY,EACJkC,IAAK6L,EAAI9S,GAAGqV,MAAMC,OAClB9P,KAAMsN,EAAI9S,GAAGuV,SACb5R,KAAM+O,EAAW1S,GAAK0S,EAAW1S,GAAGwV,aAAe1C,EAAI9S,GAAGwV,aAAapN,MACvEqN,MAA8B,IAAvB3C,EAAI9S,GAAG0V,eAAqBC,QAAQ,GAAK,IAChDC,KAAM,GACNC,KAAM,GACNtR,SAAS,EACTyC,QAAQ,EACR8O,WAAYhD,EAAI9S,GAAG8V,WACnBC,UAAWjD,EAAI9S,GAAG+V,UAClBpR,QACE+N,EAAW1S,IAAkC,IAA5B0S,EAAW1S,GAAGgW,gBAE3BtD,EAAW1S,IAAkC,IAA5B0S,EAAW1S,GAAGgW,iBAE/B1O,GACNC,SAAQmL,EAAW1S,IAAK0S,EAAW1S,GAAGiW,KACtCxO,KAAMiL,EAAW1S,GAAK0S,EAAW1S,GAAGkW,aAAepD,EAAI9S,GAAG0H,KAAKwO,aAC/DxO,KAAMgL,EAAW1S,GAAK0S,EAAW1S,GAAGmW,aAAerD,EAAI9S,GAAG0H,KAAKyO,aAC/DvO,WAAYkL,EAAI9S,GAAG4H,WACnBD,cAAemL,EAAI9S,GAAG2H,cACtBgB,QAAS+J,EAAW1S,GAAK0S,EAAW1S,GAAG2I,QAAU,KAEnD5D,IAGF,IAAK,IAAI/E,EAAI,EAAGA,EAAI8S,EAAIzS,OAAQL,IAC9B,IAAK,IAAIoW,EAAI,EAAGA,EAAItD,EAAI9S,GAAGqW,KAAKhW,OAAQ+V,IAAK,CAC3C,IAAMC,EAAOvD,EAAI9S,GAAGqW,KAAKD,GACzBjB,EAAexS,KAAK,CAClBmT,WAAYhD,EAAI9S,GAAG8V,WACnB/Q,MAAOmO,OAAOmD,EAAKC,KACnBC,OAAQF,EAAKG,KAAK,GAClBC,OAAQJ,EAAKG,KAAK,GAClBE,KAAML,EAAKG,KAAK,GAChBG,KAAMN,EAAKG,KAAK,KAItBnF,EAAc6D,GACdvD,EAAiBwD,QAEjB9D,EAAc,IACd5Q,QAAQC,IAAR,yCAeEuT,GAAoB,SAAC7J,EAAa0J,GAEtC,IADA,IAAM8C,EAAW,GACR5W,EAAI,EAAGA,EAAI8T,EAAUzT,OAAQL,IACpCoK,EAAY6J,kBAAkBH,EAAU9T,IAAIoU,MAAK,SAAAjG,GAC/CyI,EAASjU,KAAKwL,EAAM0I,aAQ1B,GAAkCnS,oBAAS,GAA3C,qBAAOoS,GAAP,MAAkBC,GAAlB,MAUA,GAA8BrS,oBAAS,GAAvC,qBAAOoJ,GAAP,MAAgBkJ,GAAhB,MA2BMC,GAAiB,WAWrB,IAVA,IAAMC,EAAW,CACf/S,GACkD,UAAhDgM,GAAiB/N,OAAOI,SAASkO,MAAMsC,KACnC7C,GAAiB/N,OAAOI,SAASkO,MAAMyG,OACvChH,GAAiB/N,OAAOI,SAASkO,MAAM8B,SAC7CE,WAAY,CACVE,SAAU,KAPa,WAWlB5S,GACPkX,EAASxE,WAAWE,SAASjQ,KAAK,CAChCoC,MAAOuM,EAAiB8F,WAAU,SAAAtS,GAAI,OAAIA,EAAKiR,YAAchP,EAAW/G,GAAG+V,aAAa,EACxF5Q,WAAYa,EAAa3F,OAAS0G,EAAW/G,GAAGiH,IAChDiP,aAAcnP,EAAW/G,GAAGyH,KAC5B0O,aAAcpP,EAAW/G,GAAG0H,KAC5B8N,aAAczO,EAAW/G,GAAG2D,KAC5B0T,WA5BK,IAAIC,MAAOC,cAMR,MALH,IAAID,MAAOE,WAAa,GAKV,KAJd,IAAIF,MAAOG,UAIc,KAHzB,IAAIH,MAAOI,WAGyB,MAFpC,IAAIJ,MAAOK,aAAe,GAAK,KAAM,IAAIL,MAAOK,cAAe,IAAIL,MAAOK,cAE3B,MAD/C,IAAIL,MAAOM,aAAe,GAAK,KAAM,IAAIN,MAAOM,cAAe,IAAIN,MAAOM,cAwB/E3B,KAAMlP,EAAW/G,GAAGuH,OACpBoB,QAAS5B,EAAW/G,GAAG2I,QACvBqN,WAAmC,IAAxBjP,EAAW/G,GAAG2E,MAAkB,GAA4B,IAAxBoC,EAAW/G,GAAG2E,MAAiB,EAAI,OAV7E3E,EAAI,EAAGA,EAAI+G,EAAW1G,OAAQL,IAAM,EAApCA,GAgBT,OAFAkX,EAASxE,WAAaP,KAAK0F,UAAUX,EAASxE,YAEvCwE,GAIHY,GAAc,WAClB,IDrtBwBC,ECqtBlBb,EAAWD,MDrtBOc,ECstBX5F,KAAK0F,UAAUX,GDrtB9BvG,KAAMqH,KAAN,UAAcvH,GAAd,+BAAqDsH,EAAQ,CAC3DlH,QAAS,CACP,eAAgB,qCCmtBqBuD,MAAK,SAAAtB,GACpB,MAAlBA,EAAI7P,KAAKiP,KACX+F,KAAQC,QAAR,oDAEAD,KAAQE,MAAR,4FA6BN,OACE,sBAAKvV,UAAWY,EAAQ,iBAAaA,EAAb,QAA8B,aAAtD,UAME,cAAC,EAAD,CAAQP,KAAMuO,EAAU3N,gBA7FJ,WAClBkD,EAAWqR,OAAM,SAAAtT,GAAI,OAAoB,IAAhBA,EAAKyC,UAChCyP,IAAW,GAEXiB,KAAQI,QAAR,iHAyF0D7U,SAAUA,EAAUE,UAAWA,IACzF,sBAAKd,UAAU,oBAAf,UAEE,qBAAKA,UAAWkU,GAAY,uBAAyB,uBAArD,SACE,cAAC,EAAD,CACEwB,oBApakB,SAACxK,EAAS/I,GAElC6O,GADE9F,EACa,CACbA,QAASA,EACT/I,MAAOA,GAGM,CACb+I,QAASA,EACT/I,MAAO,KA4ZHyC,uBAAwBA,GACxB+Q,iBA3fe,SAACzY,EAAGqE,KA4fnB+C,cA9hBY,SAACnC,EAAOkC,GAC5BO,GAAuBP,GACvBF,EAAWlC,KAAI,SAAAC,GAAI,OAAKA,EAAKP,SAAU,KACvCwC,EAAWhC,GAAOR,SAAU,EAC5B8M,EAAc,YAAItK,IACdA,EAAWqR,OAAM,SAAAtT,GAAI,OAAqB,IAAjBA,EAAKP,YAChC+O,IAAiB,GACjBE,IAAY,KAEZF,IAAiB,GACjBE,IAAY,IAGd,IAAMgF,EAAYzR,EAAW0R,MAAK,SAAA3T,GAAI,OAAqB,IAAjBA,EAAKP,WAE7CqN,EADE4G,GAA0B,WAAbhV,EACDgV,EAEA,OA8gBRE,iBAzgBe,SAAA5Y,GACvB0T,GAAY1T,EAAEqI,OAAO5D,SACjBzE,EAAEqI,OAAO5D,SACXwC,EAAWlC,KAAI,SAAAC,GAAI,OAAKA,EAAKP,SAAU,KACvC8M,EAAc,YAAItK,MAElBA,EAAWlC,KAAI,SAAAC,GAAI,OAAKA,EAAKP,SAAU,KACvC8M,EAAc,YAAItK,MAmgBZ4M,YAAaA,GACbN,cAAeA,GACfE,SAAUA,GACVxM,WAAYA,EACZiB,WAAYA,MAGhB,cAAC,EAAD,CACEhD,mBA9YmB,SAACrB,EAAMY,GAChC,IAAIgI,EAAWnC,IAAYoC,YAAYiH,IACvC,OAAQ9P,GACN,IAAK,UACL,IAAK,eACL,IAAK,SACL,IAAK,gBACL,IAAK,QACL,IAAK,SACL,IAAK,cA3BgB,SAACY,EAASZ,GAC7BY,EACF+P,IAAiBqE,cAAchV,EAAM,CAAEwN,gBAAiB,IAExDmD,IAAiBqE,cAAc,OAAQ,CAAExH,gBAAiB,IAwBxDyH,CAAiBrU,EAASZ,GAC1B,MACF,IAAK,QACH4I,EAASsM,OAAStM,EAASsM,MAC3BzO,IAAY6K,YAAYxB,GAAoBlH,GAC5C,MACF,IAAK,QACHA,EAASuM,OAASvM,EAASuM,MAC3B1O,IAAY6K,YAAYxB,GAAoBlH,GAC5C,MACF,IAAK,WACChI,EACF+P,IAAiByE,SAAStF,GAAoB,IAE9Ca,IAAiB0E,SAASvF,MAuX1BnN,wBA9SwB,SAAAD,GAC9B,IAAMoN,EAAqBpN,EAAkByI,OAAO5E,QACpDwJ,GAAsBD,GACtBa,IAAiB2E,QAAQ7L,IAEzBqG,EAAmB/R,iBAAiB,uBAAuB,SAAAwX,GACzD,IAAMC,EAAaD,EAASpK,OAAOX,MAAM0I,QACnC9R,EAAQiB,EAAaoR,WAAU,SAAAtS,GAAI,OAAIA,IAASqU,KAEtD7E,IAAiBqE,cAAc,aAAc,CAAExH,gBAAiB,IAChEtP,YAAW,WACT+S,GAAanB,EAAoByF,EAASpK,OAAOX,MAAO,GA/V1C,SAACsF,GAAmC,IAAf1O,EAAc,uDAAN,EACzCD,EAAO4M,EAAclN,QAAO,SAAAM,GAAI,OAAIA,EAAKC,QAAUA,EAAQ,KAC3DyT,EAAYzR,EAAW0R,MAAK,SAAA3T,GAAI,OAAqB,IAAjBA,EAAKP,WAE/C,GAAIO,EAAKzE,QAAU,EAAG,CAEpB,GADAiU,IAAiB8E,eAAe3F,EAAoB,cAChD+E,EAEF,IADA,IAAMa,EAAYvU,EAAKN,QAAO,SAAAM,GAAI,OAAIA,EAAKgR,aAAe0C,EAAU1C,cAC3D9V,EAAI,EAAGA,EAAI8E,EAAKzE,OAAQL,IAAK,CACpC,IAAMsZ,EAAkB,CACtBxL,SAAS,EACT9G,QAAQ,EACRmC,MAAOrE,EAAK9E,GAAG8V,cAAgBuD,EAAU,IAAMA,EAAU,GAAGvD,iBAAcxO,EAAY,QACtFyG,aAAa,EACbC,QAAS,CACPC,MAAO,CACLjD,EAAGlG,EAAK9E,GAAGuW,OAAS,GACpBpL,EAAGrG,EAAK9E,GAAGyW,OAAS,GACpBrI,WAAW,EACXpH,QAAQ,GAEVqH,IAAK,CACHrD,EAAGlG,EAAK9E,GAAG0W,KAAO,GAClBvL,EAAGrG,EAAK9E,GAAG2W,KAAO,GAClBvI,WAAW,EACXpH,QAAQ,KAIdsN,IAAiBE,aAAaf,EAAoB,aAAc6F,QAGlE,IAAK,IAAItZ,EAAI,EAAGA,EAAI8E,EAAKzE,OAAQL,IAAK,CACpC,IAAMsZ,EAAkB,CACtBxL,SAAS,EACT9G,QAAQ,EACRmC,MAAO,QACP4E,aAAa,EACbC,QAAS,CACPC,MAAO,CACLjD,EAAGlG,EAAK9E,GAAGuW,OAAS,GACpBpL,EAAGrG,EAAK9E,GAAGyW,OAAS,GACpBrI,WAAW,EACXpH,QAAQ,GAEVqH,IAAK,CACHrD,EAAGlG,EAAK9E,GAAG0W,KAAO,GAClBvL,EAAGrG,EAAK9E,GAAG2W,KAAO,GAClBvI,WAAW,EACXpH,QAAQ,KAIdsN,IAAiBE,aAAaf,EAAoB,aAAc6F,GAGpElP,IAAYmP,YAAY9F,IAwStB+F,CAAY/F,EAAoB1O,GAtHX,WACzB,IAAM0U,EAAatZ,SAASuZ,cAAc,yBACtCD,EACFnF,IAAiBqE,cAAcc,EAAWE,QAAQhW,KAAM,CAAEwN,gBAAiB,IAE3EmD,IAAiBqE,cAAc,OAAQ,CAAExH,gBAAiB,IAkHxDyI,KACC,MAOLnG,EAAmB/R,iBAAiB,4BAA4B,SAAAmY,GAC9D,IAAMV,EAAaU,EAAmB/K,OAAOX,MAAM0I,QAC7C9R,EAAQiB,EAAaoR,WAAU,SAAAtS,GAAI,OAAIA,IAASqU,KACtD3R,GAAuBzC,MAGzB0O,EAAmB/R,iBAAiB,2BAA2B,SAAA5B,GACtB,SAAnC8O,aAAakL,QAAQ,WA/EN,SAACha,EAAG2T,GACzB,IAAMsG,EAAOzF,IAAiBrK,aAAawJ,EAAoB,cAC3DuG,EAAO7Z,SAAS8Z,eAAe,QAC/BF,GAAQC,GAAQA,EAAKE,UAAUC,SAAS,YAC1C1Z,QAAQC,IAAIqZ,GACZpF,IAAY,IA2EVyF,CAAeta,EAAG2T,OAkRhBjN,YAAaA,EACbR,aAAcA,EACde,WAAYA,EACZvD,SAAUA,EACV0C,aAAcA,QAGlB,cAAC,EAAD,CACE8B,WAAYA,EACZQ,uBAjdyB,SAAA1I,GAC7B,IAAM0Y,EAAYzR,EAAW0R,MAAK,SAAA3T,GAAI,OAAqB,IAAjBA,EAAKP,WAC3CiU,IACFA,EAAU7P,QAAU7I,EAAEqI,OAAOC,MAC7BiJ,EAAc,YAAItK,MA8chB2B,gBAzckB,SAAA5I,GACtB,IAAM0Y,EAAYzR,EAAW0R,MAAK,SAAA3T,GAAI,OAAqB,IAAjBA,EAAKP,WAC3CiU,IACFA,EAAU7P,QAAU7I,EAAEqI,OAAOC,MAC7BiJ,EAAc,YAAItK,KAIpB+Q,MAkcI5P,gBAxekB,SAACG,EAAK1E,GAC5B,IAAM6U,EAAYzR,EAAW0R,MAAK,SAAA3T,GAAI,OAAqB,IAAjBA,EAAKP,WAC3CiU,GAAsB,SAAT7U,IACf6U,EAAU/Q,KAAOY,EACjBmQ,EAAUjR,QAAS,GAEjBiR,GAAsB,SAAT7U,IACf6U,EAAU9Q,KAAOW,EACjBmQ,EAAUjR,QAAS,GAEjBiR,GAAsB,SAAT7U,IACf6U,EAAU7U,KAAO0E,EACjBmQ,EAAUjR,QAAS,GAErB8J,EAAc,YAAItK,IAGlB+Q,MAwdIjP,iBApfmB,SAAAwR,GACvB,IAAM7B,EAAYzR,EAAW0R,MAAK,SAAA3T,GAAI,OAAqB,IAAjBA,EAAKP,WAC/CiU,EAAUjR,QAAS,EACnBiR,EAAU7T,MAAQ0V,EAClBhJ,EAAc,YAAItK,IAGlB+Q,MA8eIpU,UAAWA,IAEZgR,GACC,cAAC,GAAD,CAAY1E,oBAxWU,WAC1B,IACMvB,EADO6F,IAAiBrK,aAAawJ,GAAoB,cACzCxQ,KAAKqX,MAC3BhG,IAAiBiG,gBAAgB9G,GAAoB,aAAchF,GACnErE,IAAYmP,YAAY9F,IACxBkB,IAAY,IAmW8CzE,qBAhW/B,SAAA9H,GAC3B,IAAM2R,EAAOzF,IAAiBrK,aAAawJ,GAAoB,cAE/D,GAAIsG,EAAM,CACR,IAAMtL,EAAWsL,EAAK9W,KAAKqX,MACrBhB,EAAkB,CACtBxL,SAAS,EACT9G,QAAQ,EACRmC,WAAO7B,EACPyG,aAAa,EACbC,QAAS,CACPC,MAAO,CACLjD,EAAGyD,EAAST,QAAQC,MAAMjD,EAC1BG,EAAGsD,EAAST,QAAQC,MAAM9C,EAC1BiD,WAAW,EACXpH,QAAQ,GAEVqH,IAAK,CACHrD,EAAGyD,EAAST,QAAQK,IAAIrD,EACxBG,EAAGsD,EAAST,QAAQK,IAAIlD,EACxBiD,WAAW,EACXpH,QAAQ,KAIdsN,IAAiB8E,eAAe3F,GAAoB,cACpDa,IAAiBE,aAAaf,GAAoB,aAAc6F,GAChElP,IAAYmP,YAAY9F,IACxBkB,IAAY,OAqUR,KAEJ,cAAC,KAAD,CACE1P,MAAM,uCACNuV,cAAc,EACd1M,QAASA,GACT2M,KAzEsB,WAC1B,IDztB0B1C,ECytBpBb,EAAWD,KACjBxW,QAAQC,IAAIwW,ID1tBca,EC2tBX5F,KAAK0F,UAAUX,GD1tBhCvG,KAAMqH,KAAN,UAAcvH,GAAd,gCAAsDsH,EAAQ,CAC5DlH,QAAS,CACP,eAAgB,qCCwtBuBuD,MAAK,SAAAtB,GAC5CrS,QAAQC,IAAIoS,GACU,MAAlBA,EAAI7P,KAAKiP,MACX+F,KAAQC,QAAR,oDACAlB,IAAW,GACXnV,YAAW,WACTO,OAAOsY,OAAOC,YACZ,CACEzI,KAAM,IACNgG,SAAS,GAEX,OAED,MAEHD,KAAQE,MAAR,sFAwDAyC,SA9IY,WAChB5D,IAAW,IA8IP6D,OAAO,eACPC,WAAW,eACXC,UAAW,CAAEC,gBAAiB,eARhC,SAUE,mFAGY,WAAbxX,EACC,qBAAKZ,UAAU,cAAf,SACE,cAAC,IAAD,CAAQgB,QAjKO,WACrBnD,QAAQC,IAAIoW,IACZC,IAAcD,KA+JR,SAAkCA,GAAY,uCAAW,2CAEzD,S,mBCj1BJmE,GAAa,CACjB,CACE9W,GAAI,EACJmS,IAAK,IACLhJ,KAAM,eACNlK,IAAK,GACL8X,IAAK,aACLC,KAAM,WACNjJ,KAAM,GACNkJ,GAAI,MACJC,IAAK,MACLpU,IAAK,IACLtC,MAAO,4BAET,CACER,GAAI,EACJmS,IAAK,IACLhJ,KAAM,eACNlK,IAAK,GACL8X,IAAK,aACLC,KAAM,WACNjJ,KAAM,GACNkJ,GAAI,MACJC,IAAK,MACLpU,IAAK,IACLtC,MAAO,4BAET,CACER,GAAI,EACJmS,IAAK,IACLhJ,KAAM,eACNlK,IAAK,GACL8X,IAAK,aACLC,KAAM,WACNjJ,KAAM,GACNkJ,GAAI,MACJC,IAAK,MACLpU,IAAK,IACLtC,MAAO,6BAIL2W,GAAU,CACd,CACErW,MAAO,iCACPsW,UAAW,KACXjF,IAAK,MAEP,CACErR,MAAO,eACPsW,UAAW,OACXjF,IAAK,QAEP,CACErR,MAAO,eACPsW,UAAW,MACXjF,IAAK,OAEP,CACErR,MAAO,2BACPsW,UAAW,MACXjF,IAAK,OAEP,CACErR,MAAO,2BACPsW,UAAW,OACXjF,IAAK,QAEP,CACErR,MAAO,qBACPsW,UAAW,OACXjF,IAAK,QAEP,CACErR,MAAO,6BACPsW,UAAW,KACXjF,IAAK,MAEP,CACErR,MAAO,2BACPsW,UAAW,MACXjF,IAAK,OAEP,CACErR,MAAO,iCACPsW,UAAW,MACXjF,IAAK,OAEP,CACErR,MAAO,eACPsW,UAAW,QACXjF,IAAK,UAqCMkF,GAjCG,WAChB,IAAM9Y,EAAU+Y,cAIhB,OACE,sBAAK7Y,UAAU,uBAAf,UACE,sBAAKA,UAAU,kBAAf,UACE,sBAAKA,UAAU,SAAf,UACE,cAAC,IAAD,CAAQe,KAAK,UAAb,0BACA,cAAC,IAAD,CAAQA,KAAK,UAAb,6BAEF,sBAAKf,UAAU,aAAf,UACE,cAAC,IAAD,CAAO7B,MAAO,CAAEE,MAAO,KAAOqH,YAAY,mCAC1C,cAAC,IAAD,CAAOvH,MAAO,CAAEE,MAAO,KAAOqH,YAAY,+CAC1C,cAAC,IAAD,CAAOvH,MAAO,CAAEE,MAAO,KAAOqH,YAAY,yCAG9C,cAAC,KAAD,CACE2S,WAAYA,GACZK,QAASA,GACTI,MAAO,SAAAC,GACL,MAAO,CACLC,cAAe,SAAAC,GACbnZ,EAAQC,KAAR,kBAAwBgZ,EAAOxX,c,6BCxHvC2X,GAAuB,SAAC,GAAqC,IAAnChO,EAAkC,EAAlCA,QAASiO,EAAyB,EAAzBA,SAAUnB,EAAe,EAAfA,SACjD,EAAeoB,KAAKC,UAAbC,EAAP,oBAIA,OACE,cAAC,KAAD,CACEpO,QAASA,EACT7I,MAAM,eACN2V,SAAUA,EACVC,OAAO,eACPC,WAAW,eACXL,KAAM,WACJyB,EACGC,iBACA/H,MAAK,SAAAgI,GACJF,EAAKG,cACLN,EAASK,MAEVE,OAAM,SAAAzG,QAbb,SAgBE,eAAC,KAAD,6BApBmB,CACrB0G,SAAU,CAAEC,KAAM,KAmBhB,IAA0BN,KAAMA,EAAM5O,KAAK,QAAQmP,cAAe,CAAEC,UAAU,GAA9E,UACE,cAAC,KAAKC,KAAN,CAAWC,MAAM,eAAKtP,KAAK,UAAUuP,MAAO,CAAC,CAAEC,UAAU,EAAM7E,QAAS,mCAAxE,SACE,cAAC,IAAD,CAAO3P,YAAY,qCAErB,cAAC,KAAKqU,KAAN,CAAWC,MAAM,eAAKtP,KAAK,WAAWuP,MAAO,CAAC,CAAEC,UAAU,EAAM7E,QAAS,mCAAzE,SACE,cAAC,IAAD,CAAO3P,YAAY,4CAOvB2S,GAAa,CACjB,CACE9W,GAAI,EACJmS,IAAK,IACLtD,KAAM,eACN+J,KAAM,aACNC,QAAS,iCACTC,MAAO,IAET,CACE9Y,GAAI,EACJmS,IAAK,IACLtD,KAAM,eACN+J,KAAM,aACNC,QAAS,iCACTC,MAAO,IAET,CACE9Y,GAAI,EACJmS,IAAK,IACLtD,KAAM,eACN+J,KAAM,aACNC,QAAS,iCACTC,MAAO,KAIL3B,GAAU,CACd,CACErW,MAAO,2BACPsW,UAAW,OACXjF,IAAK,QAEP,CACErR,MAAO,2BACPsW,UAAW,OACXjF,IAAK,QAEP,CACErR,MAAO,2BACPsW,UAAW,UACXjF,IAAK,WAEP,CACErR,MAAO,eACPsW,UAAW,QACXjF,IAAK,UCvDMvT,GAxBA,CACb,CACEqI,KAAM,IACN8R,UAAWC,EACXpa,OAAQ,CACN,CACEqI,KAAM,aACN8R,UAAW1B,GACXzY,OAAQ,IAEV,CACEqI,KAAM,YACN8R,UDuES,WACf,MAA8BxY,oBAAS,GAAvC,mBAAOoJ,EAAP,KAAgBkJ,EAAhB,KAUA,OACE,qCACE,qBAAKpU,UAAU,cAAf,SACE,cAAC,IAAD,CAAQgB,QAPD,WACXoT,GAAW,IAMgBrT,KAAK,UAA5B,4BAIF,qBAAKf,UAAU,sBAAf,SACE,cAAC,KAAD,CAAOqY,WAAYA,GAAYK,QAASA,OAE1C,cAAC,GAAD,CACExN,QAASA,EACTiO,SArBW,SAAAK,GACf3b,QAAQC,IAAI0b,GACZpF,GAAW,IAoBP4D,SAAU,WACR5D,GAAW,UC/FbjU,OAAQ,IAEV,CACEqI,KAAM,6BACN8R,UAAWlM,GACXjO,OAAQ,OCVDqa,GARA,WACb,OACE,mCACE,cAAC,IAAD,UAAgBva,YAAaE,SCMpBsa,I,qBARH,WACV,OACE,qBAAKza,UAAU,MAAf,SACE,cAAC,GAAD,QCGS0a,GAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,8BAAqBpJ,MAAK,YAAkD,IAA/CqJ,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,O,mFCEZjJ,IAAiBwJ,SAAS1T,YAAcA,IACxCkK,IAAiBwJ,SAASC,OAASA,KACnCzJ,IAAiBwJ,SAASE,gBAAkBA,KAG5C1J,IAAiB2J,OAKjB3J,IAAiB4J,UAAUC,QAA3B,eADE,wIAEF7J,IAAiB1K,UAAUC,aAAa,GACxCyK,IAAiBrL,WAAWI,aAAa,oBACzCiL,IAAiBrL,WAAWM,eAAe,kBAE3C+K,IAAiB8J,MAAMzZ,MAAM0Z,eAAiB,GAG9CC,KAA2BR,SAAS1T,YAAcA,IAClDkU,KAA2BR,SAASS,YAAcA,KAClDD,KAA2BE,iBAAiBC,WAAW,CACrDC,cAAeC,UAAUC,qBAAuB,EAChDC,yBAAyB,EACzBC,kBAAmB,CACjBC,WAAY,CACVC,2BAA2B,EAC3BC,UAAU,EACVC,QAAQ,MAMd9c,OAAOgI,YAAcA,IACrBhI,OAAOkS,iBAAmBA,IClC5B6K,IAASC,OAAO,cAAC,GAAD,IAASjf,SAAS8Z,eAAe,SAEjDqD,O","file":"static/js/main.644b9a47.chunk.js","sourcesContent":["/* eslint-disable */\n!function(a){var t,l,e,h,i,o='<svg><symbol id=\"icon-searchclose\" viewBox=\"0 0 1024 1024\"><path d=\"M517.08411984 479.11475483L301.90637831 263.93753776a26.85237631 26.85237631 0 1 0-37.98667221 37.95153335l215.17669262 215.19504873L263.91970607 732.27864411a26.85237631 26.85237631 0 1 0 37.96936504 37.96884057l215.19504878-215.17669264 215.19504866 215.17669264a26.85237631 26.85237631 0 1 0 37.9688406-37.95100889l-215.17669262-215.2123559 215.17669262-215.1772171a26.85237631 26.85237631 0 1 0-37.9688406-37.96936505L517.10195147 479.11475483z\"  ></path></symbol><symbol id=\"icon-qingchuhuancun\" viewBox=\"0 0 1024 1024\"><path d=\"M380.220734 960.178685v-223.356732a32.673899 32.673899 0 0 1 65.283983 0V960.178685h130.504148v-223.356732a32.673899 32.673899 0 0 1 65.283982 0V960.178685h195.724314V513.46522H184.368788v446.713465h195.851946z m-261.008296-463.880025a126.483727 126.483727 0 0 1-60.753031-143.522655A130.057435 130.057435 0 0 1 184.304972 258.200383h195.915762V130.567964a130.567964 130.567964 0 0 1 261.135929 0v127.632419h195.724314a129.993618 129.993618 0 0 1 126.10083 94.575622 126.483727 126.483727 0 0 1-60.753032 143.586471V960.178685a64.582004 64.582004 0 0 1-65.283982 63.81621H184.368788a64.582004 64.582004 0 0 1-65.283982-63.81621V496.362476zM836.825712 449.649011a63.816209 63.816209 0 1 0 0-127.632419h-261.008296V130.567964a65.283982 65.283982 0 0 0-130.504148 0v191.448628h-261.008296a63.816209 63.816209 0 1 0 0 127.632419h652.456924z\"  ></path></symbol><symbol id=\"icon-asmkticon0229\" viewBox=\"0 0 1024 1024\"><path d=\"M512 128c-211.84 0-384 172.16-384 384s172.16 384 384 384 384-172.16 384-384S723.84 128 512 128zM512 857.6c-190.72 0-345.6-154.88-345.6-345.6s154.88-345.6 345.6-345.6 345.6 154.88 345.6 345.6S702.72 857.6 512 857.6z\"  ></path><path d=\"M654.72 489.6 454.4 374.4c-3.84-2.56-8.32-3.2-12.8-3.2-13.44 0-25.6 10.88-25.6 25.6l0 231.04c0 14.72 12.16 25.6 25.6 25.6 4.48 0 8.32-1.28 12.8-3.2l200.32-115.84C672 524.16 672 499.84 654.72 489.6zM454.4 605.44 454.4 418.56 616.32 512 454.4 605.44z\"  ></path></symbol><symbol id=\"icon-shuipingfanzhuan\" viewBox=\"0 0 1024 1024\"><path d=\"M799.285029 511.225357 668.763346 380.704698 668.763346 465.179648 354.608344 465.179648 354.608344 380.704698 224.087685 511.227404 354.608344 641.749086 354.608344 558.675042 668.763346 558.675042 668.763346 641.749086Z\"  ></path></symbol><symbol id=\"icon-chuizhifanzhuan\" viewBox=\"0 0 1024 1024\"><path d=\"M173 514.3534 849.277 519.2724 849.561 477.8214 173.283 472.9034Z\"  ></path><path d=\"M430.5251 602.0503 429.2501 806.1233 293.1201 806.1233 513.1221 1024.0003 731.8281 806.1233 595.7591 806.1233 595.7591 602.0503 430.5251 602.0503ZM393.8721 847.5743 470.4571 847.5743 471.7321 643.5003 554.3091 643.5003 554.3091 847.5743 631.4821 847.5743 513.0411 965.5893 393.8721 847.5743Z\"  ></path><path d=\"M513.0902-0.0001 343.4972 167.9479 449.8482 167.9479 451.1392 372.0359 575.0422 372.0359 575.0422 167.9479 681.6522 167.9479Z\"  ></path></symbol><symbol id=\"icon-fangda\" viewBox=\"0 0 1024 1024\"><path d=\"M444.928 445.44v-96.768c0-13.312 10.752-24.064 24.064-24.064s24.064 10.752 24.064 24.064V445.44h103.936c10.24 0 17.92 10.752 17.92 24.064s-8.192 24.064-17.92 24.064h-103.936v96.768c0 13.312-10.752 24.064-24.064 24.064s-24.064-10.752-24.064-24.064v-96.768H343.04c-9.728 0-17.92-10.752-17.92-24.064s8.192-24.064 17.92-24.064h101.888z m246.784 211.968l145.92 145.92c6.144 6.144 8.704 14.848 6.144 23.552-2.048 8.192-8.704 14.848-16.896 16.896-8.192 2.048-17.408 0-23.552-6.144l-145.92-145.92c-52.224 44.544-118.784 68.608-187.392 68.608-160.256 0-290.816-130.048-290.816-290.816 0-160.256 130.048-290.816 290.816-290.816 160.256 0 290.816 130.048 290.816 290.816-0.512 71.68-26.112 137.216-69.12 187.904z m-221.696 54.784c133.632 0 242.176-108.544 242.176-242.176 0-133.632-108.544-242.176-242.176-242.176-133.632 0-242.176 108.544-242.176 242.176 0 133.632 108.032 242.176 242.176 242.176z m0 0\"  ></path></symbol><symbol id=\"icon-yuanxing\" viewBox=\"0 0 1024 1024\"><path d=\"M511.28793597 879.48493867c-203.64442905 0-369.30957687-165.66430491-369.30957687-369.31463527 0-203.64442905 165.66430491-369.30957687 369.30957688-369.30957687 203.65033117 0 369.31463608 165.66430491 369.31463607 369.30957688 0 203.65033117-165.66430491 369.31463608-369.31463608 369.31463525z m0-685.86654502c-174.55140417 0-316.55190893 142.00050476-316.55190893 316.55190975 0 174.55646338 142.00050476 316.55696814 316.55190893 316.55696814 174.55646338 0 316.55696814-142.00050476 316.55696814-316.55696814 0-174.55140417-142.00050476-316.55190893-316.55696813-316.55190975z m0 0\"  ></path></symbol><symbol id=\"icon-fanzhuan\" viewBox=\"0 0 1024 1024\"><path d=\"M513.422 153.6a21.333 21.333 0 0 0-21.333 21.333v674.134a21.333 21.333 0 0 0 42.667 0V174.933a21.333 21.333 0 0 0-21.334-21.333zM364.09 295.822a59.733 59.733 0 0 0-64 12.8L126.578 477.867a56.889 56.889 0 0 0-17.067 41.244 56.889 56.889 0 0 0 17.067 41.245L301.51 731.022a58.311 58.311 0 0 0 39.822 15.645 59.733 59.733 0 0 0 22.756-4.267 56.889 56.889 0 0 0 36.978-54.044V347.022a56.889 56.889 0 0 0-36.978-51.2zM358.4 689.778A15.644 15.644 0 0 1 348.444 704a17.067 17.067 0 0 1-18.488-2.844L155.022 530.489a15.644 15.644 0 0 1-4.266-11.378 15.644 15.644 0 0 1 4.266-11.378l174.934-170.666a17.067 17.067 0 0 1 18.488-2.845 15.644 15.644 0 0 1 9.956 14.222z m539.022-211.911L722.49 307.2a59.733 59.733 0 0 0-64-12.8 56.889 56.889 0 0 0-36.978 54.044v341.334a56.889 56.889 0 0 0 36.978 54.044 59.733 59.733 0 0 0 22.755 4.267 58.311 58.311 0 0 0 41.245-17.067l174.933-170.666a56.889 56.889 0 0 0 17.067-41.245 56.889 56.889 0 0 0-17.067-41.244z m-29.866 51.2L692.622 699.733a17.067 17.067 0 0 1-18.489 2.845 15.644 15.644 0 0 1-9.955-14.222V347.022a15.644 15.644 0 0 1 9.955-14.222h8.534a17.067 17.067 0 0 1 11.377 4.267l174.934 170.666a15.644 15.644 0 0 1 4.266 11.378 15.644 15.644 0 0 1-4.266 11.378z\"  ></path></symbol><symbol id=\"icon-jiaoduceliang\" viewBox=\"0 0 1024 1024\"><path d=\"M85.869714 723.675429C38.326857 723.675429 0 762.148571 0 809.545143 0 856.941714 38.326857 895.268571 85.869714 895.268571s85.869714-38.326857 85.869715-85.869714-38.473143-85.723429-85.869715-85.723428z m0 127.707428c-22.966857 0-41.837714-18.724571-41.837714-41.837714s18.724571-41.837714 41.837714-41.837714 41.837714 18.724571 41.837715 41.837714c-0.146286 23.259429-18.724571 41.837714-41.837715 41.837714z\"  ></path><path d=\"M937.252571 723.675429c-40.082286 0-73.874286 27.648-83.236571 64.804571H153.014857v41.837714H854.308571c9.362286 37.302857 43.008 64.804571 83.236572 64.804572 47.396571 0 85.869714-38.326857 85.869714-85.869715-0.146286-47.250286-38.765714-85.577143-86.162286-85.577142z m0 127.707428c-22.966857 0-41.837714-18.724571-41.837714-41.837714s18.724571-41.837714 41.837714-41.837714c22.966857 0 41.837714 18.724571 41.837715 41.837714 0 23.259429-18.578286 41.837714-41.837715 41.837714z\"  ></path><path d=\"M626.834286 163.401143c-28.525714 28.525714-32.768 71.826286-13.019429 104.740571l-495.908571 495.616 29.549714 29.549715 495.908571-495.616c32.914286 19.748571 76.214857 15.506286 104.740572-13.019429 33.499429-33.499429 33.499429-87.917714 0-121.270857-33.353143-33.499429-87.771429-33.645714-121.270857 0z m90.258285 90.258286c-16.384 16.384-42.861714 16.384-58.953142 0-16.384-16.384-16.384-42.861714 0-58.953143 16.384-16.384 42.861714-16.384 58.953142 0 16.237714 16.091429 16.237714 42.569143 0 58.953143z\"  ></path><path d=\"M397.165714 524.580571s130.779429 104.448 137.508572 275.163429l-35.254857 2.779429s-6.582857-158.134857-130.779429-253.074286l28.525714-24.868572z\"  ></path></symbol><symbol id=\"icon-shizi-\" viewBox=\"0 0 1024 1024\"><path d=\"M461.15 83.21h101.92v285.81H461.15z\"  ></path><path d=\"M548 98.21l0.09 255.8h-71.9l-0.08-255.81H548m30-30H446.1v30l0.09 255.8v30h131.93v-30L578 98.2v-30z\" fill=\"#FFFFFF\" ></path><path d=\"M83.04 461.13h283.75v102H83.04z\"  ></path><path d=\"M351.79 476.12v72H98v-72h253.79m30-30H68v132h313.79v-132z\" fill=\"#FFFFFF\" ></path><path d=\"M657 461.37h285.87v102H657z\"  ></path><path d=\"M927.87 476.37v72H672v-72h255.87m30-30H642v132h315.87v-132z\" fill=\"#FFFFFF\" ></path><path d=\"M461.12 655.98h101.95v285.65H461.12z\"  ></path><path d=\"M548.05 671l0.05 255.64h-72V670.99h71.95m30-30h-132v315.64h132V641z\" fill=\"#FFFFFF\" ></path><path d=\"M511.5 511.5m-40.52429 40.52429a57.31 57.31 0 1 0 81.04858-81.04858 57.31 57.31 0 1 0-81.04858 81.04858Z\"  ></path><path d=\"M511.5 469.19a42.31 42.31 0 1 1-42.31 42.31 42.31 42.31 0 0 1 42.31-42.31m0-30a72.31 72.31 0 1 0 72.31 72.31 72.39 72.39 0 0 0-72.31-72.31z\" fill=\"#FFFFFF\" ></path></symbol><symbol id=\"icon-jujiao\" viewBox=\"0 0 1024 1024\"><path d=\"M512 170.688a341.312 341.312 0 1 1 0 682.624A341.312 341.312 0 0 1 512 170.688M512 128a384 384 0 1 0 0 768A384 384 0 0 0 512 128z\"  ></path><path d=\"M298.688 533.312h-128a21.312 21.312 0 0 1 0-42.624h128a21.312 21.312 0 1 1 0 42.624z m554.624 0h-128a21.312 21.312 0 0 1 0-42.624h128a21.312 21.312 0 0 1 0 42.624zM512 320a21.312 21.312 0 0 1-21.312-21.312v-128a21.312 21.312 0 0 1 42.624 0v128C533.312 310.4 523.776 320 512 320z m0 554.688a21.312 21.312 0 0 1-21.312-21.376v-128a21.312 21.312 0 0 1 42.624 0v128a21.312 21.312 0 0 1-21.312 21.376z\"  ></path></symbol><symbol id=\"icon-fanzhuan1\" viewBox=\"0 0 1024 1024\"><path d=\"M896 494.08000001l0 35.32799999-768 0 0-35.32799999zM305.152 417.28L668.16 417.28000001l19.968 0.51199999 5.12-9.216 5.12000001-8.704L496.64 51.2l-20.48 0-190.976 331.264-10.24 17.408 5.12 8.704 5.12 8.704 19.968 0z m20.47999999-35.328L486.4 103.424l160.768 278.528-321.53600001 0zM688.128 642.048l10.24000001-17.92-5.12000001-8.704-5.12-8.704L304.64 606.72l-19.968-0.512-5.12 9.216-5.12 8.704L476.16 972.8l20.48 0 191.488-330.752z m-362.49600001 0L647.168 642.048l-160.768 278.528-160.76800001-278.528z\"  ></path></symbol><symbol id=\"icon-02-chizi\" viewBox=\"0 0 1024 1024\"><path d=\"M894.151111 351.089778L351.089778 894.151111l-221.240889-221.240889 80.469333-80.469333 20.110222-20.110222 40.220445-40.220445 20.110222-20.110222 40.220445-40.220444 20.110222-20.110223 40.220444-40.248889 20.110222-20.110222 40.220445-40.220444 20.110222-20.110222 40.220445-40.220445 20.110222-20.110222L572.302222 230.4l20.110222-20.110222 80.469334-80.440889z m-241.351111-40.220445l-60.330667-60.359111-40.220444 40.248889 120.689778 120.661333-20.110223 20.110223-120.689777-120.661334-40.220445 40.220445 60.330667 60.330666-20.110222 20.110223-60.330667-60.330667-40.220444 40.220444 120.689777 120.689778-20.110222 20.110222-120.689778-120.689777-40.220444 40.248889 60.330667 60.330666-20.110223 20.110222-60.330666-60.330666-40.220445 40.220444 120.689778 120.689778-20.110222 20.110222-120.689778-120.689778-40.220444 40.220445 60.330666 60.359111-20.110222 20.110222L230.4 612.551111l-60.330667 60.359111 181.020445 181.020445 502.840889-502.840889-181.020445-181.020445L612.551111 230.4l60.330667 60.359111z\"  ></path></symbol><symbol id=\"icon-juxing\" viewBox=\"0 0 1024 1024\"><path d=\"M853.333333 810.666667H170.666667V213.333333h682.666666v597.333334zM213.333333 256v512h597.333334V256z\"  ></path></symbol><symbol id=\"icon-leimupinleifenleileibie\" viewBox=\"0 0 1024 1024\"><path d=\"M320 512 192 512c-70.4 0-128 57.6-128 128l0 128c0 70.4 57.6 128 128 128l128 0c70.4 0 128-57.6 128-128l0-128C448 569.6 390.4 512 320 512zM384 768c0 35.2-28.8 64-64 64L192 832c-35.2 0-64-28.8-64-64l0-128c0-35.2 28.8-64 64-64l128 0c35.2 0 64 28.8 64 64L384 768zM768 64l-128 0C569.6 64 512 121.6 512 192l0 128c0 70.4 57.6 128 128 128l128 0c70.4 0 128-57.6 128-128L896 192C896 121.6 838.4 64 768 64zM832 320c0 35.2-28.8 64-64 64l-128 0C604.8 384 576 355.2 576 320L576 192c0-35.2 28.8-64 64-64l128 0c35.2 0 64 28.8 64 64L832 320zM768 512l-128 0c-70.4 0-128 57.6-128 128l0 128c0 70.4 57.6 128 128 128l128 0c70.4 0 128-57.6 128-128l0-128C896 569.6 838.4 512 768 512zM832 768c0 35.2-28.8 64-64 64l-128 0c-35.2 0-64-28.8-64-64l0-128c0-35.2 28.8-64 64-64l128 0c35.2 0 64 28.8 64 64L832 768zM320 64 192 64C121.6 64 64 121.6 64 192l0 128c0 70.4 57.6 128 128 128l128 0c70.4 0 128-57.6 128-128L448 192C448 121.6 390.4 64 320 64zM384 320c0 35.2-28.8 64-64 64L192 384C156.8 384 128 355.2 128 320L128 192c0-35.2 28.8-64 64-64l128 0c35.2 0 64 28.8 64 64L384 320z\"  ></path></symbol><symbol id=\"icon-shenglvehao\" viewBox=\"0 0 1024 1024\"><path d=\"M176 511a56 56 0 1 0 112 0 56 56 0 1 0-112 0zM456 511a56 56 0 1 0 112 0 56 56 0 1 0-112 0zM736 511a56 56 0 1 0 112 0 56 56 0 1 0-112 0z\"  ></path></symbol></svg>',c=(c=document.getElementsByTagName(\"script\"))[c.length-1].getAttribute(\"data-injectcss\"),n=function(a,t){t.parentNode.insertBefore(a,t)};if(c&&!a.__iconfont__svg__cssinject__){a.__iconfont__svg__cssinject__=!0;try{document.write(\"<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>\")}catch(a){console&&console.log(a)}}function d(){i||(i=!0,e())}function s(){try{h.documentElement.doScroll(\"left\")}catch(a){return void setTimeout(s,50)}d()}t=function(){var a,t;(t=document.createElement(\"div\")).innerHTML=o,o=null,(a=t.getElementsByTagName(\"svg\")[0])&&(a.setAttribute(\"aria-hidden\",\"true\"),a.style.position=\"absolute\",a.style.width=0,a.style.height=0,a.style.overflow=\"hidden\",t=a,(a=document.body).firstChild?n(t,a.firstChild):a.appendChild(t))},document.addEventListener?~[\"complete\",\"loaded\",\"interactive\"].indexOf(document.readyState)?setTimeout(t,0):(l=function(){document.removeEventListener(\"DOMContentLoaded\",l,!1),t()},document.addEventListener(\"DOMContentLoaded\",l,!1)):document.attachEvent&&(e=t,h=a.document,i=!1,s(),h.onreadystatechange=function(){\"complete\"==h.readyState&&(h.onreadystatechange=null,d())})}(window);","import React, { memo } from 'react'\nimport { renderRoutes } from 'react-router-config'\nimport { withRouter } from 'react-router-dom'\n\nexport default memo(\n  withRouter(function IndexComponent(props) {\n    if (props.location.pathname === '/') {\n      props.history.push('/studyList')\n    }\n    return (\n      <>\n        <div className=\"content\">{renderRoutes(props.route.routes)}</div>\n      </>\n    )\n  })\n)\n","import React from 'react'\nimport './Header.scss'\nimport { Button } from 'antd'\n\nconst Header = props => {\n  return (\n    <div className=\"header-box\">\n      <div className=\"user-content\">\n        {props.data?.patientName ? (\n          <div className=\"patient-detail\">\n            <span>姓名：{props.data.patientName}，</span>\n            <span>性别：{props.data.gender_dictText}，</span>\n            <span>年龄：{props.data.age}，</span>\n            <span>病例编号：{props.data.medicalCaseCode}，</span>\n            <span>patientId：{props.data.patientId}，</span>\n            <span>检查日期：{props.data.createTime}</span>\n          </div>\n        ) : null}\n      </div>\n      {props.pageType === 'review' ? (\n        <div className=\"export\">\n          <Button disabled={props.pageState === 'admin'} type=\"primary\" onClick={props.handleShowModal}>\n            提交审核结果\n          </Button>\n        </div>\n      ) : null}\n    </div>\n  )\n}\n\nexport default Header\n","import { createFromIconfontCN } from '@ant-design/icons'\nimport iconfont from './iconFont'\n\nconst IconFont = createFromIconfontCN({\n  scriptUrl: { iconfont },\n})\n\nexport default IconFont\n","import React, { useState } from 'react'\nimport './Toolbar.scss'\nimport IconFont from '../common/IconFont/index'\nimport { Tooltip } from 'antd'\n\nconst toolbarList = [\n  {\n    id: 1,\n    text: '自动播放',\n    icon: <IconFont style={{ fontSize: '24px' }} type=\"icon-asmkticon0229\" />,\n    type: 'playClip',\n    checked: false,\n    filter: true,\n  },\n  {\n    id: 2,\n    text: '垂直翻转',\n    icon: <IconFont style={{ fontSize: '20px' }} type=\"icon-fanzhuan1\" />,\n    type: 'vflip',\n    checked: false,\n    filter: true,\n  },\n  {\n    id: 3,\n    text: '水平翻转',\n    icon: <IconFont style={{ fontSize: '20px' }} type=\"icon-fanzhuan\" />,\n    type: 'hflip',\n    checked: false,\n    filter: true,\n  },\n  {\n    id: 4,\n    text: '放大',\n    icon: <IconFont style={{ fontSize: '26px' }} type=\"icon-fangda\" />,\n    type: 'Magnify',\n    checked: false,\n  },\n  // {\n  //   id: 5,\n  //   text: '聚焦',\n  //   icon: <IconFont style={{ fontSize: '24px' }} type=\"icon-jujiao\" />,\n  //   type: 'focus',\n  //   checked: false,\n  // },\n  {\n    id: 6,\n    type: 'hr',\n  },\n  {\n    id: 7,\n    text: '圆形',\n    icon: <IconFont style={{ fontSize: '24px' }} type=\"icon-yuanxing\" />,\n    type: 'EllipticalRoi',\n    checked: false,\n  },\n  {\n    id: 8,\n    text: '矩形',\n    icon: <IconFont style={{ fontSize: '24px' }} type=\"icon-juxing\" />,\n    type: 'RectangleRoi',\n    checked: false,\n  },\n  {\n    id: 9,\n    text: '角度选择',\n    icon: <IconFont style={{ fontSize: '18px' }} type=\"icon-jiaoduceliang\" />,\n    type: 'Angle',\n    checked: false,\n  },\n  {\n    id: 10,\n    text: '尺子',\n    icon: <IconFont style={{ fontSize: '22px' }} type=\"icon-02-chizi\" />,\n    type: 'Length',\n    checked: false,\n  },\n  {\n    id: 11,\n    text: '清除',\n    icon: <IconFont style={{ fontSize: '18px' }} type=\"icon-qingchuhuancun\" />,\n    type: 'Eraser',\n    checked: false,\n  },\n  // {\n  //   id: 12,\n  //   text: '标记',\n  //   icon: <IconFont style={{ fontSize: '20px' }} type=\"icon-shizi-\" />,\n  //   type: 'MarkNodule',\n  //   checked: false,\n  // },\n]\n\nconst Toolbar = props => {\n  const [state, setstate] = useState(toolbarList)\n\n  const handleToolbarClick = (e, index, type) => {\n    if (type === 'playClip' || type === 'vflip' || type === 'hflip') {\n      state[index].checked = !state[index].checked\n      setstate([...state])\n    } else {\n      state[index].checked = !state[index].checked\n      state.map(item => {\n        if (item.type !== type && item.type !== 'playClip' && item.type !== 'vflip' && item.type !== 'hflip')\n          item.checked = false\n      })\n      setstate([...state])\n    }\n\n    // 父组件传值\n    props.handleToolbarClick(type, state[index].checked)\n  }\n\n  return (\n    <ul className=\"tool-bar-box\">\n      {toolbarList.map((item, index) => {\n        return item.type === 'hr' ? (\n          <li key={item.id} className=\"hr\">\n            <div></div>\n          </li>\n        ) : (\n          <li\n            id={item.type === 'MarkNodule' && item.checked ? 'mark' : null}\n            key={item.id}\n            className={item.checked ? (item.filter ? 'filter-active' : 'active') : ''}\n            onClick={e => handleToolbarClick(e, index, item.type)}\n            data-type={item.type}\n          >\n            <Tooltip title={item.text}>{item.icon}</Tooltip>\n          </li>\n        )\n      })}\n    </ul>\n  )\n}\n\nexport default Toolbar\n","import React from 'react'\nimport './CustomOverlay.scss'\n\nconst CustomOverlay = props => {\n  return (\n    <ul className=\"custom-overlay-box\">\n      <li>\n        当前帧数：<span>{props.imageIndex}</span>\n      </li>\n      <li>\n        总帧数：<span>{props.stackSize}</span>\n      </li>\n      <li>\n        窗宽：<span>{props.windowWidth} HU</span>\n      </li>\n      <li>\n        窗位：<span>{props.windowCenter} HU</span>\n      </li>\n    </ul>\n  )\n}\n\nexport default CustomOverlay\n","import React from 'react'\nimport CornerstoneViewport from 'react-cornerstone-viewport'\nimport './ViewerMain.scss'\nimport useWindowSize from '../../hook/useWindowSize'\nimport Toolbar from '../../components/Toolbar/Toolbar'\nimport CustomOverlay from '../common/CustomOverlay/CustomOverlay'\nimport { Spin } from 'antd'\n\nconst ViewerMain = props => {\n  const size = useWindowSize()\n  return (\n    <div className=\"viewer-main-box\">\n      {props.imagesConfig.length === 0 ? (\n        <div className=\"error-tips\">\n          <Spin tip=\"加载失败，请重新尝试\" />\n        </div>\n      ) : (\n        <div>\n          <Toolbar handleToolbarClick={props.handleToolbarClick} />\n          <CornerstoneViewport\n            imageIdIndex={props.imageIdIndex}\n            viewportOverlayComponent={CustomOverlay}\n            onElementEnabled={elementEnabledEvt => props.handleElementEnabledEvt(elementEnabledEvt)}\n            tools={props.toolsConfig}\n            imageIds={props.imagesConfig}\n            style={{\n              minWidth: '100%',\n              height: props.pageType === 'detail' ? `${size.height}px` : `${size.height - 85}px`,\n              flex: '1',\n            }}\n          />\n        </div>\n      )}\n    </div>\n  )\n}\n\nexport default ViewerMain\n","import { useEffect, useState, useCallback } from 'react'\n\nexport default function useWindowSize() {\n  const [size, setSize] = useState({\n    width: document.documentElement.clientWidth,\n    height: document.documentElement.clientHeight,\n  })\n\n  const onResize = useCallback(() => {\n    setSize({\n      width: document.documentElement.clientWidth,\n      height: document.documentElement.clientHeight,\n    })\n  }, [])\n\n  useEffect(() => {\n    window.addEventListener('resize', onResize)\n    return () => {\n      window.removeEventListener('resize', onResize)\n    }\n  }, [onResize])\n\n  return size\n}\n","import React from 'react'\nimport './MiddleSidePanel.scss'\n// import IconFont from '../common/IconFont/index'\nimport { Checkbox, Button, Input } from 'antd'\n\nconst { TextArea } = Input\n\nconst MiddleSidePanel = props => {\n  const handleListClick = (index, num) => {\n    props.onCheckChange(index, num)\n  }\n\n  return (\n    <div className=\"middle-side-panel-box\">\n      <div className=\"nodule-list-box\">\n        <div className=\"title\">结节列表（{props.noduleList.length}）</div>\n        <div className=\"table-box\">\n          <div className=\"table-title\">\n            {/* <div className=\"icon\">\n              <IconFont style={{ fontSize: '16px' }} type=\"icon-leimupinleifenleileibie\" />\n            </div> */}\n            {/* <Checkbox disabled indeterminate={props.indeterminate} onChange={props.onCheckAllChange} checked={props.checkAll}>\n              <div className=\"num\">中心帧</div>\n            </Checkbox> */}\n            <Checkbox disabled checked={true}>\n              <div className=\"num\">中心帧</div>\n            </Checkbox>\n            <div className=\"size\">大小(单位mm)</div>\n            <div className=\"type\">类型</div>\n            {/* <div className=\"risk\">风险</div> */}\n            <div className=\"soak\">结节</div>\n            <div className=\"action\">状态</div>\n          </div>\n          <div id=\"tableIItemBox\" className=\"table-content\">\n            {props.noduleList?.map((item, index) => (\n              <div\n                key={item.id}\n                className={`table-item ${item.active ? 'item-active' : ''}`}\n                onClick={e => handleListClick(index, item.num)}\n              >\n                {/* <div className=\"icon\">{item.id}</div> */}\n                <Checkbox onChange={e => props.onCheckChange(index, item.num)} checked={item.checked}>\n                  <div className=\"num\">{item.num}</div>\n                </Checkbox>\n                <div className=\"size\">{item.size.replace(/m/g, '')}</div>\n                <div className=\"type\">{item.type}</div>\n                {/* <div className=\"risk\">{item.risk}</div> */}\n                <div className=\"soak\">\n                  <span>{item.state === undefined ? '-' : item.state ? '是' : '否'}</span>\n                </div>\n                <div className=\"action review-state\">\n                  <span className={item.review ? 'review' : null}>{item.review === true ? '已检阅' : '未检阅'}</span>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n      <div className=\"image-info-box\">\n        <div className=\"title\">患者报告</div>\n        <div className=\"info-box\">\n          <div className=\"report-box\">\n            <div className=\"title\">影像所见</div>\n            <div id=\"viewerItemBox\" className=\"report-content\">\n              {props.noduleList?.map((item, index) => {\n                return item.checked ? (\n                  <div\n                    key={item.id}\n                    className={`viewer-item ${item.active ? 'item-active' : ''}`}\n                    onClick={e => props.handleCheckedListClick(item.num)}\n                  >\n                    于 <span>{item.lung}</span> <span>{item.lobe}</span> 可见一 <span>{item.featureLabelG}</span>{' '}\n                    结节，类型为 <span>{item.type}</span>，大小约 <span>{item.size}</span>，体积约{' '}\n                    <span>{item.noduleSize} mm³</span>。{/* 结节恶性风险为：<span>{item.risk}</span> */}\n                  </div>\n                ) : null\n              })}\n            </div>\n          </div>\n          {/* <div className=\"suggest-box\">\n            <div className=\"title\">影像建议</div>\n            <div className=\"suggest-content\">\n              <div className=\"suggest-content-wrap\">\n                <TextArea\n                  placeholder=\"请输入建议\"\n                  bordered={false}\n                  rows={6}\n                  maxLength={150}\n                  style={{\n                    width: '100%',\n                    resize: 'none',\n                  }}\n                  value={props.noduleInfo?.suggest}\n                  onChange={props.handleTextareaOnChange}\n                />\n              </div>\n              <div className=\"save\">\n                <Button type=\"primary\" size=\"small\">\n                  保存\n                </Button>\n              </div>\n            </div>\n          </div> */}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default MiddleSidePanel\n","import React from 'react'\nimport './NoduleInfo.scss'\nimport { Radio, Select, Button, Input } from 'antd'\n\nconst { Option } = Select\n\nconst NoduleInfo = props => {\n  const onLungChange = e => {\n    props.checkNoduleList(e.target.value, 'lung')\n    if (e.target.value === '左肺' && props.noduleInfo.lobe === '中叶') {\n      props.checkNoduleList('上叶', 'lobe')\n    }\n  }\n\n  const onLobeChange = e => {\n    props.checkNoduleList(e.target.value, 'lobe')\n  }\n\n  const handleSelectChange = val => {\n    props.checkNoduleList(val, 'type')\n  }\n\n  return (\n    <div className=\"nodule-info-box\">\n      {props.noduleInfo ? (\n        <div className=\"nodule-detail\">\n          {/* <div className=\"list\">\n            <em>影像层：</em>\n            {props.noduleInfo.num}\n          </div> */}\n          <div className=\"list\">\n            <span className=\"list-title\">肺：</span>\n            <Radio.Group disabled={props.pageState === 'admin'} onChange={onLungChange} value={props.noduleInfo.lung}>\n              <Radio value={'右肺'}>右肺</Radio>\n              <Radio value={'左肺'}>左肺</Radio>\n            </Radio.Group>\n          </div>\n          <div className=\"list\">\n            <div className=\"list-title\">肺叶：</div>\n            <Radio.Group disabled={props.pageState === 'admin'} onChange={onLobeChange} value={props.noduleInfo.lobe}>\n              <Radio value={'上叶'}>上叶</Radio>\n              {props.noduleInfo.lung === '左肺' ? null : <Radio value={'中叶'}>中叶</Radio>}\n              <Radio value={'下叶'}>下叶</Radio>\n            </Radio.Group>\n          </div>\n          <div className=\"list\">\n            <div className=\"list-title\">类型：</div>\n            <Select\n              disabled={props.pageState === 'admin'}\n              size=\"small\"\n              value={props.noduleInfo.type}\n              style={{ width: 150, fontSize: 13 }}\n              onChange={handleSelectChange}\n            >\n              <Option value=\"肺内实性\">肺内实性</Option>\n              <Option value=\"部分实性\">部分实性</Option>\n              <Option value=\"磨玻璃\">磨玻璃</Option>\n              <Option value=\"肺内钙化\">肺内钙化</Option>\n              <Option value=\"胸膜实性\">胸膜实性</Option>\n              <Option value=\"胸膜钙化\">胸膜钙化</Option>\n              <Option value=\"其他\">其他</Option>\n            </Select>\n          </div>\n          <div className=\"list\">\n            <em>建议：</em>\n            <Input\n              disabled={props.pageState === 'admin'}\n              placeholder=\"这里输入结节备注信息\"\n              size=\"small\"\n              style={{ width: 150, height: 24, marginTop: 2, fontSize: 13 }}\n              onChange={props.handleTextareaOnChange}\n              onBlur={props.handleInputBlur}\n              value={props.noduleInfo?.suggest}\n            />\n          </div>\n          <div className=\"list\">\n            <em>大小：</em>\n            {props.noduleInfo.size}\n          </div>\n          <div className=\"list\">\n            <em>体积：</em>\n            {props.noduleInfo.noduleSize} mm³\n          </div>\n          {/* <div className=\"list\">\n            <em>形态类型：</em>\n            {props.noduleInfo.type}\n          </div> */}\n        </div>\n      ) : null}\n      {props.noduleInfo ? (\n        <div className=\"check-group\">\n          <div className=\"group-wrap\">\n            <span>是否为结节</span>\n            <div className=\"group\">\n              <Button\n                disabled={props.pageState === 'admin'}\n                type={props.noduleInfo.state === false ? 'primary' : null}\n                style={{ marginRight: '10px' }}\n                size=\"small\"\n                onClick={e => props.updateNoduleList(false)}\n              >\n                否\n              </Button>\n              <Button\n                disabled={props.pageState === 'admin'}\n                type={props.noduleInfo.state === true ? 'primary' : null}\n                size=\"small\"\n                onClick={e => props.updateNoduleList(true)}\n              >\n                是\n              </Button>\n            </div>\n          </div>\n        </div>\n      ) : null}\n    </div>\n  )\n}\n\nexport default NoduleInfo\n","let defaultColor = 'red',\n  activeColor = 'red',\n  fillColor = 'transparent'\n\nfunction setFillColor(color) {\n  fillColor = color\n}\n\nfunction getFillColor() {\n  return fillColor\n}\n\nfunction setToolColor(color) {\n  defaultColor = color\n}\n\nfunction getToolColor() {\n  return defaultColor\n}\n\nfunction setActiveColor(color) {\n  activeColor = color\n}\n\nfunction getActiveColor() {\n  return activeColor\n}\n\nfunction getColorIfActive(data) {\n  if (data.color) {\n    return data.color\n  }\n\n  return data.active ? activeColor : defaultColor\n}\n\nconst toolColors = {\n  setFillColor,\n  getFillColor,\n  setToolColor,\n  getToolColor,\n  setActiveColor,\n  getActiveColor,\n  getColorIfActive,\n}\n\nexport default toolColors\n","let defaultWidth = 1,\n  activeWidth = 2\n\nfunction setToolWidth(width) {\n  defaultWidth = width\n}\n\nfunction getToolWidth() {\n  return defaultWidth\n}\n\nfunction setActiveWidth(width) {\n  activeWidth = width\n}\n\nfunction getActiveWidth() {\n  return activeWidth\n}\n\nconst toolStyle = {\n  setToolWidth,\n  getToolWidth,\n  setActiveWidth,\n  getActiveWidth,\n}\n\nexport default toolStyle\n","import cornerstone from 'cornerstone-core'\nimport toolStyle from './toolStyle.js'\n\nfunction getToolState(element, toolName) {\n  const toolStateManager = getElementToolStateManager(element)\n  return toolStateManager.get(element, toolName)\n}\n\nfunction getElementToolStateManager(element) {\n  const enabledElement = cornerstone.getEnabledElement(element)\n  return enabledElement.toolStateManager\n}\n\nfunction getNewContext(canvas) {\n  const context = canvas.getContext('2d')\n  context.setTransform(1, 0, 0, 1, 0, 0)\n  return context\n}\n\nfunction draw(context, fn) {\n  context.save()\n  fn(context)\n  context.restore()\n}\n\nfunction rotatePoint(point, center, angle) {\n  const angleRadians = angle * (Math.PI / 180) // Convert to radians\n  const rotatedX =\n    Math.cos(angleRadians) * (point.x - center.x) - Math.sin(angleRadians) * (point.y - center.y) + center.x\n  const rotatedY =\n    Math.sin(angleRadians) * (point.x - center.x) + Math.cos(angleRadians) * (point.y - center.y) + center.y\n\n  return {\n    x: rotatedX,\n    y: rotatedY,\n  }\n}\n\nfunction path(context, options = {}, fn) {\n  const { color, lineWidth, fillStyle, lineDash, shouldDrawLines = true } = options\n\n  context.beginPath()\n  context.strokeStyle = color || context.strokeStyle\n\n  context.lineWidth = lineWidth || (lineWidth === undefined && toolStyle.getToolWidth()) || context.lineWidth\n  if (lineDash) {\n    context.setLineDash(lineDash)\n  }\n\n  fn(context)\n\n  if (fillStyle) {\n    context.fillStyle = fillStyle\n    context.fill()\n  }\n\n  if (shouldDrawLines) {\n    context.stroke()\n  }\n\n  if (lineDash) {\n    context.setLineDash([])\n  }\n}\n\nfunction drawRect(context, element, corner1, corner2, options, coordSystem = 'pixel', initialRotation = 0.0) {\n  if (coordSystem === 'pixel') {\n    corner1 = cornerstone.pixelToCanvas(element, corner1)\n    corner2 = cornerstone.pixelToCanvas(element, corner2)\n  }\n\n  const viewport = cornerstone.getViewport(element)\n\n  // Calculate the center of the image\n  const { clientWidth: width, clientHeight: height } = element\n  const { scale, translation } = viewport\n  const rotation = viewport.rotation - initialRotation\n\n  const centerPoint = {\n    x: width / 2 + translation.x * scale,\n    y: height / 2 + translation.y * scale,\n  }\n\n  if (Math.abs(rotation) > 0.05) {\n    corner1 = rotatePoint(corner1, centerPoint, -rotation)\n    corner2 = rotatePoint(corner2, centerPoint, -rotation)\n  }\n\n  const w = Math.abs(corner1.x - corner2.x)\n  const h = Math.abs(corner1.y - corner2.y)\n\n  corner1 = {\n    x: Math.min(corner1.x, corner2.x),\n    y: Math.min(corner1.y, corner2.y),\n  }\n\n  corner2 = {\n    x: corner1.x + w,\n    y: corner1.y + h,\n  }\n\n  let corner3 = {\n    x: corner1.x + w,\n    y: corner1.y,\n  }\n\n  let corner4 = {\n    x: corner1.x,\n    y: corner1.y + h,\n  }\n\n  if (Math.abs(rotation) > 0.05) {\n    corner1 = rotatePoint(corner1, centerPoint, rotation)\n    corner2 = rotatePoint(corner2, centerPoint, rotation)\n    corner3 = rotatePoint(corner3, centerPoint, rotation)\n    corner4 = rotatePoint(corner4, centerPoint, rotation)\n  }\n\n  path(context, options, context => {\n    context.moveTo(corner1.x, corner1.y)\n    context.lineTo(corner3.x, corner3.y)\n    context.lineTo(corner2.x, corner2.y)\n    context.lineTo(corner4.x, corner4.y)\n    context.lineTo(corner1.x, corner1.y)\n  })\n}\n\nexport { getToolState, getElementToolStateManager, getNewContext, rotatePoint, draw, path, drawRect }\n","import csTools from 'cornerstone-tools'\nimport toolColors from './toolColors.js'\nimport { getToolState, getNewContext, draw, drawRect } from './util'\n\nconst BaseAnnotationTool = csTools.importInternal('base/BaseAnnotationTool')\n\nexport default class MarkNoduleTool extends BaseAnnotationTool {\n  constructor(props = {}) {\n    const defaultProps = {\n      name: 'MarkNodule',\n      supportedInteractionTypes: ['Mouse'],\n      configuration: {\n        drawHandles: false,\n        drawHandlesOnHover: false,\n        hideHandlesIfMoving: true,\n        renderDashed: false,\n      },\n    }\n\n    super(props, defaultProps)\n  }\n\n  handleSelectedCallback(e) {\n    // 覆盖父类方法，禁止工具选中\n  }\n\n  createNewMeasurement(eventData) {\n    return {\n      visible: true,\n      active: false,\n      color: undefined,\n      invalidated: true,\n      handles: {\n        start: {\n          x: eventData.currentPoints.image.x,\n          y: eventData.currentPoints.image.y,\n          highlight: false,\n          active: false,\n        },\n        end: {\n          x: eventData.currentPoints.image.x,\n          y: eventData.currentPoints.image.y,\n          highlight: false,\n          active: false,\n        },\n      },\n    }\n  }\n\n  pointNearTool(element, data, coords, interactionType) {\n    return false\n  }\n\n  updateCachedStats(image, element, data) {\n    // const seriesModule = cornerstone.metaData.get('generalSeriesModule', image.imageId) || {}\n    // const modality = seriesModule.modality\n    // const pixelSpacing = getPixelSpacing(image)\n    // const stats = _calculateStats(image, element, data.handles, modality, pixelSpacing)\n    // data.cachedStats = stats\n    // data.invalidated = false\n  }\n\n  renderToolData(evt) {\n    const toolData = getToolState(evt.currentTarget, this.name)\n    localStorage.setItem('active', 'false')\n\n    if (!toolData) {\n      return\n    }\n\n    if (toolData.data[0]) {\n      localStorage.setItem('active', 'true')\n    } else {\n      localStorage.setItem('active', 'false')\n    }\n\n    const eventData = evt.detail\n    const { element } = eventData\n    const context = getNewContext(eventData.canvasContext.canvas)\n\n    draw(context, context => {\n      // If we have tool data for this element - iterate over each set and draw it\n      for (let i = 0; i < toolData.data.length; i++) {\n        const data = toolData.data[i]\n\n        if (data.visible === false) {\n          continue\n        }\n\n        // Configure\n        const color = toolColors.getColorIfActive(data)\n\n        const rectOptions = { color }\n\n        // Draw\n        drawRect(\n          context,\n          element,\n          data.handles.start,\n          data.handles.end,\n          rectOptions,\n          'pixel',\n          data.handles.initialRotation\n        )\n      }\n    })\n  }\n}\n","import React, { useState } from 'react'\nimport './MarkDialog.scss'\nimport { Radio, Button } from 'antd'\nimport { Select } from 'antd'\nimport IconFont from '../../common/IconFont/index'\n\nconst { Option } = Select\n\nconst MarkDialog = props => {\n  const [radioVal, setRadioVal] = useState(2)\n  const [selectVal, setSelectVal] = useState(null)\n  const [disabled, setDisabled] = useState(true)\n\n  const handleRadioChange = e => {\n    setRadioVal(e.target.value)\n  }\n\n  const handleSelectChange = value => {\n    setSelectVal(value)\n    if (value) {\n      setDisabled(false)\n    }\n  }\n\n  const handleCloselick = () => {\n    props.handleCloseCallback()\n  }\n\n  const handleButtonClick = () => {\n    props.handleSubmitCallback(selectVal)\n  }\n\n  return (\n    <div className=\"mark-dialog-wrap\">\n      <div className=\"mark-dialog-box\">\n        <div className=\"mark-title\">\n          <span>标注选择</span>\n          <span className=\"close\" onClick={handleCloselick}>\n            <IconFont style={{ fontSize: '24px' }} type=\"icon-searchclose\" />\n          </span>\n        </div>\n        <div className=\"mark-content\">\n          <Radio.Group onChange={handleRadioChange} value={radioVal}>\n            <Radio disabled={'disabled'} value={1}>\n              AI检测\n            </Radio>\n            <Radio value={2}>简单标注</Radio>\n          </Radio.Group>\n        </div>\n        <div className=\"mark-btn-group\">\n          {radioVal === 1 ? (\n            <div className=\"tab-one\">\n              <Button type=\"primary\">立即检测</Button>\n              <Button type=\"primary\">加入待检测列表</Button>\n            </div>\n          ) : (\n            <div className=\"tab-two\">\n              <Select defaultValue=\"请选择节点类型\" style={{ width: 200 }} onChange={handleSelectChange}>\n                <Option value=\"1\">肺内实性</Option>\n                <Option value=\"2\">部分实性</Option>\n                <Option value=\"3\">磨玻璃</Option>\n              </Select>\n              <Button disabled={disabled} type=\"primary\" onClick={handleButtonClick}>\n                确定\n              </Button>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default MarkDialog\n","/* eslint-disable no-sequences */\nexport const getURLParameters = url =>\n  (url.match(/([^?=&]+)(=([^&]*))/g) || []).reduce(\n    (a, v) => ((a[v.slice(0, v.indexOf('='))] = v.slice(v.indexOf('=') + 1)), a),\n    {}\n  )\n","import axios from 'axios'\nimport { getURLParameters } from '../util/index'\n\nconst basicUrl = getURLParameters(window.location.href).url\naxios.defaults.headers.common['X-Access-Token'] = getURLParameters(window.location.href).token\n\n// const basicUrl = 'http://139.196.114.118:9999'\n// const basicUrl = 'http://192.168.1.204:9999'\n// axios.defaults.headers.common['X-Access-Token'] =\n//   'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJleHAiOjE2NDYwNTg0MDEsInVzZXJuYW1lIjoiYWRtaW4ifQ.OOIA5yY82NAjUZDxGjZjC2WlMK4ToAhs7hloJ5li0no'\n\n// 获取序列列表（0-详情，1-订单跳转）\nexport const getMedicalList = (id, type) =>\n  axios.get(`${basicUrl}/tailai-multiomics/multiomics/medicalImage/series/list?resource=${id}&type=${type}`)\n\n// 获取影像列表\nexport const getImageList = resource =>\n  axios.get(\n    `${basicUrl}/tailai-multiomics/multiomics/medicalImage/instance/list?column=z_position&order=asc&archiveTaskId=${resource}`\n  )\n\n// 获取病人信息\nexport const getPatientsList = id =>\n  axios.get(`${basicUrl}/tailai-multiomics/multiomics/medicalImage/taskMedicalCaseView/list?id=${id}`)\n\n// 获取结节列表（管理员）\nexport const getNodeList = id => axios.get(`${basicUrl}/report/image/getDnResult?id=${id}`)\n\n// 获取结节列表（医生）\nexport const getDoctorTask = id => axios.get(`${basicUrl}/report/doctorTask/task?id=${id}`)\n\n// 提交审核结果\nexport const saveDnResult = params =>\n  axios.post(`${basicUrl}/report/doctorTask/saveTask`, params, {\n    headers: {\n      'Content-Type': 'application/json;charset=UTF-8',\n    },\n  })\n\n// 提交审核结果\nexport const updateDnResult = params =>\n  axios.post(`${basicUrl}/report/image/updateDnResult`, params, {\n    headers: {\n      'Content-Type': 'application/json;charset=UTF-8',\n    },\n  })\n","import React, { useState, useEffect, useRef } from 'react'\nimport './Viewer.scss'\nimport Header from '../../components/Header/Header'\n// import LeftSidePanel from '../../components/LeftSidePanel/LeftSidePanel'\nimport ViewerMain from '../../components/ViewerMain/ViewerMain'\nimport MiddleSidePanel from '../../components/MiddleSidePanel/MiddleSidePanel'\nimport cornerstone from 'cornerstone-core'\nimport cornerstoneTools from 'cornerstone-tools'\nimport NoduleInfo from '../../components/common/NoduleInfo/NoduleInfo'\nimport MarkNoduleTool from '../../components/common/MarkNoduleTool/MarkNoduleTool'\nimport MarkDialog from '../../components/common/MarkDialog/MarkDialog'\nimport { saveDnResult, getImageList, getNodeList, updateDnResult, getPatientsList, getDoctorTask } from '../../api/api'\nimport { getURLParameters } from '../../util/index'\nimport { Modal, message, Button } from 'antd'\n\nconst Viewer = () => {\n  const defaultTools = [\n    {\n      name: 'Wwwc',\n      mode: 'active',\n      modeOptions: { mouseButtonMask: 1 },\n    },\n    { name: 'StackScrollMouseWheel', mode: 'active' },\n    {\n      name: 'RectangleRoi',\n      modeOptions: { mouseButtonMask: 1 },\n    },\n    {\n      name: 'Eraser',\n      modeOptions: { mouseButtonMask: 1 },\n    },\n    {\n      name: 'Magnify',\n      modeOptions: { mouseButtonMask: 1 },\n    },\n    {\n      name: 'EllipticalRoi',\n      modeOptions: { mouseButtonMask: 1 },\n    },\n    {\n      name: 'Angle',\n      modeOptions: { mouseButtonMask: 1 },\n    },\n    {\n      name: 'Length',\n      modeOptions: { mouseButtonMask: 1 },\n    },\n  ]\n\n  // 初始化\n  // eslint-disable-next-line no-unused-vars\n  const [toolsConfig, setToolsConfig] = useState(defaultTools)\n  const [imagesConfig, setImagesConfig] = useState([])\n  // eslint-disable-next-line no-unused-vars\n  const [taskLength, setTaskLength] = useState(0)\n  // eslint-disable-next-line no-unused-vars\n  const [sequenceListData, setLeftSidePanelData] = useState([])\n  const [noduleList, setNoduleList] = useState([])\n  const [originNoduleList, setOriginNoduleList] = useState([])\n  // eslint-disable-next-line no-unused-vars\n  const [patients, setPatients] = useState([])\n  const [noduleMapList, setNoduleMapList] = useState([])\n\n  // 结节详情\n  const [noduleInfo, setNoduleInfo] = useState(null)\n\n  // 页面类型和状态\n  const [pageType, setPageType] = useState('')\n  const [pageState, setPageState] = useState('')\n\n  // 跳转帧数\n  const [imageIdIndex, setImageIdIndex] = useState(0)\n\n  // 初始化结节信息\n  useEffect(() => {\n    // 管理员请求接口\n    const fetchAdminData = async () => {\n      const result = await getNodeList(getURLParameters(window.location.href).id)\n      if (result.data.code === 200) {\n        if (result.data.result) {\n          const data = JSON.parse(result.data.result.text.replace(/'/g, '\"'))\n          formatNodeData(data, [])\n          fetcImagehData()\n        }\n      }\n    }\n\n    // 医生请求接口\n    const fetchDoctorData = async () => {\n      const result = await getDoctorTask(getURLParameters(window.location.href).doctorId)\n      if (result.data.code === 200) {\n        if (result.data.result) {\n          if (result.data.result.doctorTask.resultInfo) {\n            const data = JSON.parse(result.data.result.imageResult.replace(/'/g, '\"'))\n            const resultInfo = JSON.parse(result.data.result.doctorTask.resultInfo.replace(/'/g, '\"'))\n            formatNodeData(data, resultInfo.nodelist)\n            fetcImagehData()\n          } else {\n            const data = JSON.parse(result.data.result.imageResult.replace(/'/g, '\"'))\n            formatNodeData(data, [])\n            fetcImagehData()\n          }\n        }\n      }\n    }\n\n    const fetcImagehData = async () => {\n      const res = await getImageList(getURLParameters(window.location.href).resource)\n      setImageList(res)\n    }\n\n    if (getURLParameters(window.location.href).user === 'admin') {\n      fetchAdminData()\n    } else if (!getURLParameters(window.location.href).user) {\n      fetcImagehData()\n    } else {\n      fetchDoctorData()\n    }\n\n    if (getURLParameters(window.location.href).state === 'admin') {\n      setPageState('admin')\n    }\n\n    if (getURLParameters(window.location.href).page === 'review') {\n      setPageType('review')\n    } else if (getURLParameters(window.location.href).page === 'image') {\n      setPageType('image')\n    } else if (getURLParameters(window.location.href).page === 'detail') {\n      setPageType('detail')\n      const index = getURLParameters(window.location.href).index\n      if (index) {\n        setImageIdIndex(Number(index) - 1)\n      } else {\n        setImageIdIndex(0)\n      }\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  // 初始化影像信息\n  useEffect(() => {\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  // 初始化病人信息\n  useEffect(() => {\n    const fetchData = async () => {\n      const result = await getPatientsList(getURLParameters(window.location.href).resource)\n      // console.log(result)\n      if (result.data.code === 200 && result.data.result) {\n        setPatients(result.data.result.records[0])\n      }\n    }\n    if (getURLParameters(window.location.href).page === 'image') {\n      fetchData()\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  // 多选\n  const [indeterminate, setIndeterminate] = useState(false)\n  const [checkAll, setCheckAll] = useState(true)\n\n  // 视图元素\n  const [cornerstoneElement, setCornerstoneElement] = useState(null)\n\n  // 弹出层\n  const [showPopover, setShowPopover] = useState({\n    index: 0,\n    visible: false,\n  })\n\n  // ===========================================================\n\n  // 添加结节标注\n  const addNodeTool = (cornerstoneElement, index = 0) => {\n    const item = noduleMapList.filter(item => item.index === index + 1)\n    const checkItme = noduleList.find(item => item.checked === true)\n\n    if (item.length >= 1) {\n      cornerstoneTools.clearToolState(cornerstoneElement, 'MarkNodule')\n      if (checkItme) {\n        const checkNode = item.filter(item => item.noduleName === checkItme.noduleName)\n        for (let i = 0; i < item.length; i++) {\n          const measurementData = {\n            visible: true,\n            active: true,\n            color: item[i].noduleName === (checkNode[0] && checkNode[0].noduleName) ? undefined : 'white',\n            invalidated: true,\n            handles: {\n              start: {\n                x: item[i].startX - 10,\n                y: item[i].startY - 10,\n                highlight: true,\n                active: true,\n              },\n              end: {\n                x: item[i].endX + 10,\n                y: item[i].endY + 10,\n                highlight: true,\n                active: true,\n              },\n            },\n          }\n          cornerstoneTools.addToolState(cornerstoneElement, 'MarkNodule', measurementData)\n        }\n      } else {\n        for (let i = 0; i < item.length; i++) {\n          const measurementData = {\n            visible: true,\n            active: true,\n            color: 'white',\n            invalidated: true,\n            handles: {\n              start: {\n                x: item[i].startX - 10,\n                y: item[i].startY - 10,\n                highlight: true,\n                active: true,\n              },\n              end: {\n                x: item[i].endX + 10,\n                y: item[i].endY + 10,\n                highlight: true,\n                active: true,\n              },\n            },\n          }\n          cornerstoneTools.addToolState(cornerstoneElement, 'MarkNodule', measurementData)\n        }\n      }\n      cornerstone.updateImage(cornerstoneElement)\n    }\n  }\n\n  // 设置图片列表\n  const setImageList = res => {\n    if (res.data.code === 200 && res.data.result.length > 0) {\n      const newList = res.data.result\n      const imageList = []\n      newList.forEach(item => {\n        imageList.push(`wadouri:${item.ossUrl.replace('http://', 'https://')}`)\n      })\n\n      setImagesConfig(imageList)\n\n      // 缓存图片\n      if (getURLParameters(window.location.href).user) {\n        if (imageList.length > 0) {\n          loadAndCacheImage(cornerstone, imageList)\n        }\n      }\n    }\n  }\n\n  // 序列点击事件\n  // const handleSequenceListClick = async instanceUid => {\n  //   const res = await getImageList(instanceUid)\n  //   setImageList(res)\n  // }\n\n  // ===========================================================\n\n  // 单选\n  const onCheckChange = (index, num) => {\n    handleCheckedListClick(num)\n    noduleList.map(item => (item.checked = false))\n    noduleList[index].checked = true\n    setNoduleList([...noduleList])\n    if (noduleList.every(item => item.checked === true)) {\n      setIndeterminate(false)\n      setCheckAll(true)\n    } else {\n      setIndeterminate(true)\n      setCheckAll(false)\n    }\n\n    const checkItme = noduleList.find(item => item.checked === true)\n    if (checkItme && pageType !== 'detail') {\n      setNoduleInfo(checkItme)\n    } else {\n      setNoduleInfo(null)\n    }\n  }\n\n  // 全选\n  const onCheckAllChange = e => {\n    setCheckAll(e.target.checked)\n    if (e.target.checked) {\n      noduleList.map(item => (item.checked = true))\n      setNoduleList([...noduleList])\n    } else {\n      noduleList.map(item => (item.checked = false))\n      setNoduleList([...noduleList])\n    }\n  }\n\n  // 弹出层按钮事件\n  const handleHideNodule = (e, id) => {\n    // noduleList.splice(\n    //   noduleList.findIndex(item => item.id === id),\n    //   1\n    // )\n    // setNoduleList([...noduleList])\n    // setShowPopover({\n    //   visible: false,\n    //   index: 0,\n    // })\n  }\n\n  // 列表点击事件\n  const handleCheckedListClick = index => {\n    // const item = noduleList.find(item => Number(item.num) === index + 1)\n    // if (item) {\n    //   noduleList.map(item => (item.active = false))\n    //   item.active = true\n    //   setNoduleList([...noduleList])\n    //   setTimeout(() => {\n    //     const viewerItemActive = document.querySelector('#viewerItemBox .item-active')\n    //     viewerItemActive && viewerItemActive.scrollIntoView()\n    //   }, 0)\n    // }\n\n    // 设置当前视图选中项\n    if (cornerstoneElement) {\n      changeActiveImage(index, cornerstoneElement)\n    }\n  }\n\n  // 更新列表事件\n  const updateNoduleList = checkState => {\n    const checkItme = noduleList.find(item => item.checked === true)\n    checkItme.review = true\n    checkItme.state = checkState\n    setNoduleList([...noduleList])\n\n    // 提交结节数据\n    saveResults()\n  }\n\n  // \b更新结节事件\n  const checkNoduleList = (val, type) => {\n    const checkItme = noduleList.find(item => item.checked === true)\n    if (checkItme && type === 'lung') {\n      checkItme.lung = val\n      checkItme.review = true\n    }\n    if (checkItme && type === 'lobe') {\n      checkItme.lobe = val\n      checkItme.review = true\n    }\n    if (checkItme && type === 'type') {\n      checkItme.type = val\n      checkItme.review = true\n    }\n    setNoduleList([...noduleList])\n\n    // 提交结节数据\n    saveResults()\n  }\n\n  // 更新医生影像建议内容\n  const handleTextareaOnChange = e => {\n    const checkItme = noduleList.find(item => item.checked === true)\n    if (checkItme) {\n      checkItme.suggest = e.target.value\n      setNoduleList([...noduleList])\n    }\n  }\n\n  // 建议框失去焦点后保存数据\n  const handleInputBlur = e => {\n    const checkItme = noduleList.find(item => item.checked === true)\n    if (checkItme) {\n      checkItme.suggest = e.target.value\n      setNoduleList([...noduleList])\n    }\n\n    // 提交结节数据\n    saveResults()\n  }\n\n  // 列表右侧操作菜单\n  const handleVisibleChange = (visible, index) => {\n    if (visible) {\n      setShowPopover({\n        visible: visible,\n        index: index,\n      })\n    } else {\n      setShowPopover({\n        visible: visible,\n        index: 0,\n      })\n    }\n  }\n\n  // ===========================================================\n\n  // 切换当前工具栏选中项\n  const changeToolActive = (checked, type) => {\n    if (checked) {\n      cornerstoneTools.setToolActive(type, { mouseButtonMask: 1 })\n    } else {\n      cornerstoneTools.setToolActive('Wwwc', { mouseButtonMask: 1 })\n    }\n  }\n\n  // 设定当前选中工具状态\n  const setActiveToolState = () => {\n    const activeTool = document.querySelector('.tool-bar-box .active')\n    if (activeTool) {\n      cornerstoneTools.setToolActive(activeTool.dataset.type, { mouseButtonMask: 1 })\n    } else {\n      cornerstoneTools.setToolActive('Wwwc', { mouseButtonMask: 1 })\n    }\n  }\n\n  const handleToolbarClick = (type, checked) => {\n    let viewport = cornerstone.getViewport(cornerstoneElement)\n    switch (type) {\n      case 'Magnify':\n      case 'RectangleRoi':\n      case 'Eraser':\n      case 'EllipticalRoi':\n      case 'Angle':\n      case 'Length':\n      case 'MarkNodule':\n        changeToolActive(checked, type)\n        break\n      case 'hflip':\n        viewport.hflip = !viewport.hflip\n        cornerstone.setViewport(cornerstoneElement, viewport)\n        break\n      case 'vflip':\n        viewport.vflip = !viewport.vflip\n        cornerstone.setViewport(cornerstoneElement, viewport)\n        break\n      case 'playClip':\n        if (checked) {\n          cornerstoneTools.playClip(cornerstoneElement, 10)\n        } else {\n          cornerstoneTools.stopClip(cornerstoneElement)\n        }\n        break\n      default:\n        break\n    }\n  }\n\n  // 切换当前视图\n  const changeActiveImage = (index, cornerstoneElement) => {\n    cornerstone.loadImage(imagesConfig[index - 1]).then(image => {\n      cornerstone.displayImage(cornerstoneElement, image)\n      cornerstoneTools.addStackStateManager(cornerstoneElement, ['stack'])\n      cornerstoneTools.addToolState(cornerstoneElement, 'stack', {\n        currentImageIdIndex: Number(index - 1),\n        imageIds: imagesConfig,\n      })\n    })\n  }\n\n  // 工具回调\n  const [showMark, setShowMark] = useState(false)\n  const showMarkDialog = (e, cornerstoneElement) => {\n    const tool = cornerstoneTools.getToolState(cornerstoneElement, 'MarkNodule')\n    let mark = document.getElementById('mark')\n    if (tool && mark && mark.classList.contains('active')) {\n      console.log(tool)\n      setShowMark(true)\n    }\n  }\n\n  // 工具操作函数\n  const handleCloseCallback = () => {\n    const tool = cornerstoneTools.getToolState(cornerstoneElement, 'MarkNodule')\n    const toolData = tool.data.pop()\n    cornerstoneTools.removeToolState(cornerstoneElement, 'MarkNodule', toolData)\n    cornerstone.updateImage(cornerstoneElement)\n    setShowMark(false)\n  }\n\n  const handleSubmitCallback = value => {\n    const tool = cornerstoneTools.getToolState(cornerstoneElement, 'MarkNodule')\n\n    if (tool) {\n      const toolData = tool.data.pop()\n      const measurementData = {\n        visible: true,\n        active: false,\n        color: undefined,\n        invalidated: true,\n        handles: {\n          start: {\n            x: toolData.handles.start.x,\n            y: toolData.handles.start.y,\n            highlight: true,\n            active: false,\n          },\n          end: {\n            x: toolData.handles.end.x,\n            y: toolData.handles.end.y,\n            highlight: true,\n            active: true,\n          },\n        },\n      }\n      cornerstoneTools.clearToolState(cornerstoneElement, 'MarkNodule')\n      cornerstoneTools.addToolState(cornerstoneElement, 'MarkNodule', measurementData)\n      cornerstone.updateImage(cornerstoneElement)\n      setShowMark(false)\n    }\n  }\n\n  // 监听视图变化事件\n  const handleElementEnabledEvt = elementEnabledEvt => {\n    const cornerstoneElement = elementEnabledEvt.detail.element\n    setCornerstoneElement(cornerstoneElement)\n    cornerstoneTools.addTool(MarkNoduleTool)\n\n    cornerstoneElement.addEventListener('cornerstonenewimage', newImage => {\n      const curImageId = newImage.detail.image.imageId\n      const index = imagesConfig.findIndex(item => item === curImageId)\n\n      cornerstoneTools.setToolActive('MarkNodule', { mouseButtonMask: 1 })\n      setTimeout(() => {\n        windowChange(cornerstoneElement, newImage.detail.image, 2)\n        addNodeTool(cornerstoneElement, index)\n        setActiveToolState()\n      }, 0)\n    })\n\n    // cornerstoneElement.addEventListener('cornerstoneimageloaded', newImage => {\n    //   console.log(1)\n    // })\n\n    cornerstoneElement.addEventListener('cornerstoneimagerendered', imageRenderedEvent => {\n      const curImageId = imageRenderedEvent.detail.image.imageId\n      const index = imagesConfig.findIndex(item => item === curImageId)\n      handleCheckedListClick(index)\n    })\n\n    cornerstoneElement.addEventListener('cornerstonetoolsmouseup', e => {\n      if (localStorage.getItem('active') === 'true') {\n        showMarkDialog(e, cornerstoneElement)\n      }\n    })\n  }\n\n  // 调整窗宽窗位\n  const windowChange = (element, image, index) => {\n    /*\n     * index = 1，ww: default, wl: default\n     * index = 2，ww: 1500, wl: -450\n     * index = 3，ww: 250, wl: 30\n     * index = 4，ww: 1000, wl: 250\n     * index = 5，ww: 300, wl: 40\n     */\n    const viewportDefault = cornerstone.getDefaultViewportForImage(element, image)\n    const viewport = cornerstone.getViewport(element)\n    viewport.voiLUT = undefined\n\n    if (index === 1) {\n      viewport.voi.windowWidth = viewportDefault.voi.windowWidth\n      viewport.voi.windowCenter = viewportDefault.voi.windowCenter\n    } else if (index === 2) {\n      viewport.voi.windowWidth = 1500\n      viewport.voi.windowCenter = -400\n    } else if (index === 3) {\n      viewport.voi.windowWidth = 250\n      viewport.voi.windowCenter = 30\n    } else if (index === 4) {\n      viewport.voi.windowWidth = 1000\n      viewport.voi.windowCenter = 250\n    } else if (index === 5) {\n      viewport.voi.windowWidth = 300\n      viewport.voi.windowCenter = 40\n    }\n\n    cornerstone.setViewport(element, viewport)\n  }\n\n  // ===========================================================\n\n  // 保存为图片\n  // const saveAs = (element, filename, mimetype = 'image/png') => {\n  //   const canvas = element.querySelector('canvas')\n  //   if (canvas.msToBlob) {\n  //     const blob = canvas.msToBlob()\n\n  //     return window.navigator.msSaveBlob(blob, filename)\n  //   }\n\n  //   const lnk = document.createElement('a')\n  //   lnk.download = filename\n  //   lnk.href = canvas.toDataURL(mimetype, 1)\n\n  //   if (document.createEvent) {\n  //     const e = document.createEvent('MouseEvents')\n  //     e.initMouseEvent('click', true, true, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null)\n  //     lnk.dispatchEvent(e)\n  //   } else if (lnk.fireEvent) {\n  //     lnk.fireEvent('onclick')\n  //   }\n  // }\n\n  // 格式化结节数据\n  const formatNodeData = (data, resultInfo) => {\n    const nodulesList = []\n    const nodulesMapList = []\n    let index = 0\n    if (data.code === 10000) {\n      setOriginNoduleList([...data.detectionResult.nodulesList])\n      const res = data.detectionResult.nodulesList\n      // const res = data.detectionResult.nodulesList.sort(nestedSort('coord', 'coordZ'))\n      for (let i = 0; i < res.length; i++) {\n        nodulesList.push({\n          id: index,\n          num: res[i].coord.coordZ,\n          size: res[i].diameter,\n          type: resultInfo[i] ? resultInfo[i].featureLabel : res[i].featureLabel.value,\n          risk: (res[i].scrynMaligant * 100).toFixed(0) + '%',\n          soak: '',\n          info: '',\n          checked: false,\n          active: false,\n          noduleName: res[i].noduleName,\n          noduleNum: res[i].noduleNum,\n          state:\n            resultInfo[i] && resultInfo[i].invisable === 1\n              ? false\n              : resultInfo[i] && resultInfo[i].invisable === 0\n              ? true\n              : undefined,\n          review: resultInfo[i] ? resultInfo[i].edit : false,\n          lung: resultInfo[i] ? resultInfo[i].lungLocation : res[i].lobe.lungLocation,\n          lobe: resultInfo[i] ? resultInfo[i].lobeLocation : res[i].lobe.lobeLocation,\n          noduleSize: res[i].noduleSize,\n          featureLabelG: res[i].featureLabelG,\n          suggest: resultInfo[i] ? resultInfo[i].suggest : '',\n        })\n        index++\n      }\n\n      for (let i = 0; i < res.length; i++) {\n        for (let j = 0; j < res[i].rois.length; j++) {\n          const rois = res[i].rois[j]\n          nodulesMapList.push({\n            noduleName: res[i].noduleName,\n            index: Number(rois.key),\n            startX: rois.bbox[1],\n            startY: rois.bbox[0],\n            endX: rois.bbox[3],\n            endY: rois.bbox[2],\n          })\n        }\n      }\n      setNoduleList(nodulesList)\n      setNoduleMapList(nodulesMapList)\n    } else {\n      setNoduleList([])\n      console.log(`数据加载失败`)\n    }\n  }\n\n  // 排序函数\n  // const nestedSort =\n  //   (prop1, prop2 = null, direction = 'asc') =>\n  //   (e1, e2) => {\n  //     const a = prop2 ? e1[prop1][prop2] : e1[prop1],\n  //       b = prop2 ? e2[prop1][prop2] : e2[prop1],\n  //       sortOrder = direction === 'asc' ? 1 : -1\n  //     return a < b ? -sortOrder : a > b ? sortOrder : 0\n  //   }\n\n  // 缓存图片请求池\n  const loadAndCacheImage = (cornerstone, imageList) => {\n    const taskPool = []\n    for (let i = 0; i < imageList.length; i++) {\n      cornerstone.loadAndCacheImage(imageList[i]).then(image => {\n        taskPool.push(image.imageId)\n        // setTaskLength(taskPool.length)\n      })\n    }\n  }\n\n  // ===========================================================\n\n  const [showState, setShowState] = useState(false)\n\n  // 隐藏和显示结节列表\n  const showNoduleList = () => {\n    console.log(showState)\n    setShowState(!showState)\n  }\n\n  // ===========================================================\n\n  const [visible, setVisible] = useState(false)\n\n  const hideModal = () => {\n    setVisible(false)\n  }\n\n  // 弹窗\n  const handleShowModal = () => {\n    if (noduleList.every(item => item.review === true)) {\n      setVisible(true)\n    } else {\n      message.warning(`请检阅完所有结节列表后在进行结果提交`)\n    }\n  }\n\n  // 获取当前时间\n  const getCurrentTime = () => {\n    let yy = new Date().getFullYear()\n    let mm = new Date().getMonth() + 1\n    let dd = new Date().getDate()\n    let hh = new Date().getHours()\n    let mf = new Date().getMinutes() < 10 ? '0' + new Date().getMinutes() : new Date().getMinutes()\n    let ss = new Date().getSeconds() < 10 ? '0' + new Date().getSeconds() : new Date().getSeconds()\n    return yy + '-' + mm + '-' + dd + ' ' + hh + ':' + mf + ':' + ss\n  }\n\n  // 格式化提交数据\n  const formatPostData = () => {\n    const postData = {\n      id:\n        getURLParameters(window.location.href).user === 'admin'\n          ? getURLParameters(window.location.href).taskId\n          : getURLParameters(window.location.href).doctorId,\n      resultInfo: {\n        nodelist: [],\n      },\n    }\n\n    for (let i = 0; i < noduleList.length; i++) {\n      postData.resultInfo.nodelist.push({\n        index: originNoduleList.findIndex(item => item.noduleNum === noduleList[i].noduleNum) + 1,\n        imageIndex: imagesConfig.length - noduleList[i].num,\n        lungLocation: noduleList[i].lung,\n        lobeLocation: noduleList[i].lobe,\n        featureLabel: noduleList[i].type,\n        edit_time: getCurrentTime(),\n        edit: noduleList[i].review,\n        suggest: noduleList[i].suggest,\n        invisable: noduleList[i].state === false ? 1 : noduleList[i].state === true ? 0 : '-',\n      })\n    }\n\n    postData.resultInfo = JSON.stringify(postData.resultInfo)\n\n    return postData\n  }\n\n  // 暂存结节数据\n  const saveResults = () => {\n    const postData = formatPostData()\n    saveDnResult(JSON.stringify(postData)).then(res => {\n      if (res.data.code === 200) {\n        message.success(`结节结果保存成功`)\n      } else {\n        message.error(`结节结果保存失败，请重新尝试`)\n      }\n    })\n  }\n\n  // 提交审核结果\n  const handleSubmitResults = () => {\n    const postData = formatPostData()\n    console.log(postData)\n    updateDnResult(JSON.stringify(postData)).then(res => {\n      console.log(res)\n      if (res.data.code === 200) {\n        message.success(`提交审核结果成功`)\n        setVisible(false)\n        setTimeout(() => {\n          window.parent.postMessage(\n            {\n              code: 200,\n              success: true,\n            },\n            '*'\n          )\n        }, 1000)\n      } else {\n        message.error(`提交失败，请刷新后重新尝试`)\n      }\n    })\n  }\n\n  return (\n    <div className={pageType ? `viewer-${pageType}-box` : 'viewer-box'}>\n      {/* {taskLength !== imagesConfig.length ? (\n        <div className=\"load-image-mask\">\n          <span>图片序列加载中 {taskLength > 0 ? <em>，正在加载第 {taskLength} 张</em> : null}</span>\n        </div>\n      ) : null} */}\n      <Header data={patients} handleShowModal={handleShowModal} pageType={pageType} pageState={pageState} />\n      <div className=\"viewer-center-box\">\n        {/* <LeftSidePanel data={sequenceListData} handleSequenceListClick={handleSequenceListClick} /> */}\n        <div className={showState ? 'middle-box-wrap-show' : 'middle-box-wrap-hide'}>\n          <MiddleSidePanel\n            handleVisibleChange={handleVisibleChange}\n            handleCheckedListClick={handleCheckedListClick}\n            handleHideNodule={handleHideNodule}\n            onCheckChange={onCheckChange}\n            onCheckAllChange={onCheckAllChange}\n            showPopover={showPopover}\n            indeterminate={indeterminate}\n            checkAll={checkAll}\n            noduleList={noduleList}\n            noduleInfo={noduleInfo}\n          />\n        </div>\n        <ViewerMain\n          handleToolbarClick={handleToolbarClick}\n          handleElementEnabledEvt={handleElementEnabledEvt}\n          toolsConfig={toolsConfig}\n          imagesConfig={imagesConfig}\n          noduleList={noduleList}\n          pageType={pageType}\n          imageIdIndex={imageIdIndex}\n        />\n      </div>\n      <NoduleInfo\n        noduleInfo={noduleInfo}\n        handleTextareaOnChange={handleTextareaOnChange}\n        handleInputBlur={handleInputBlur}\n        checkNoduleList={checkNoduleList}\n        updateNoduleList={updateNoduleList}\n        pageState={pageState}\n      />\n      {showMark ? (\n        <MarkDialog handleCloseCallback={handleCloseCallback} handleSubmitCallback={handleSubmitCallback} />\n      ) : null}\n\n      <Modal\n        title=\"提交审核结果\"\n        maskClosable={false}\n        visible={visible}\n        onOk={handleSubmitResults}\n        onCancel={hideModal}\n        okText=\"确认\"\n        cancelText=\"取消\"\n        maskStyle={{ backgroundColor: 'transparent' }}\n      >\n        <p>是否提交检阅结果</p>\n      </Modal>\n\n      {pageType === 'review' ? (\n        <div className=\"show-button\">\n          <Button onClick={showNoduleList}>{showState ? '展开结节列表' : '收起结节列表'}</Button>\n        </div>\n      ) : null}\n    </div>\n  )\n}\n\nexport default Viewer\n","import React from 'react'\nimport './StudyList.scss'\nimport { useHistory } from 'react-router-dom'\nimport { Table, Input, Button } from 'antd'\n\nconst dataSource = [\n  {\n    id: 1,\n    key: '1',\n    name: '张三',\n    age: 32,\n    day: '2020-02-02',\n    date: '08:45:14',\n    code: '',\n    mm: '1.5',\n    fps: '100',\n    num: '5',\n    state: '检测成功',\n  },\n  {\n    id: 2,\n    key: '2',\n    name: '李四',\n    age: 32,\n    day: '2020-02-02',\n    date: '08:45:14',\n    code: '',\n    mm: '1.5',\n    fps: '100',\n    num: '5',\n    state: '检测成功',\n  },\n  {\n    id: 3,\n    key: '3',\n    name: '王五',\n    age: 32,\n    day: '2020-02-02',\n    date: '08:45:14',\n    code: '',\n    mm: '1.5',\n    fps: '100',\n    num: '5',\n    state: '检测成功',\n  },\n]\n\nconst columns = [\n  {\n    title: '受检者编号',\n    dataIndex: 'id',\n    key: 'id',\n  },\n  {\n    title: '姓名',\n    dataIndex: 'name',\n    key: 'name',\n  },\n  {\n    title: '年龄',\n    dataIndex: 'age',\n    key: 'age',\n  },\n  {\n    title: '检查日期',\n    dataIndex: 'day',\n    key: 'day',\n  },\n  {\n    title: '检查时间',\n    dataIndex: 'date',\n    key: 'date',\n  },\n  {\n    title: '影像号',\n    dataIndex: 'code',\n    key: 'code',\n  },\n  {\n    title: '层厚（mm）',\n    dataIndex: 'mm',\n    key: 'mm',\n  },\n  {\n    title: '图像帧数',\n    dataIndex: 'fps',\n    key: 'fps',\n  },\n  {\n    title: '疑似结节数',\n    dataIndex: 'num',\n    key: 'num',\n  },\n  {\n    title: '状态',\n    dataIndex: 'state',\n    key: 'state',\n  },\n]\n\nconst StudyList = () => {\n  const history = useHistory()\n\n  // const onSearch = value => console.log(value)\n\n  return (\n    <div className=\"study-list-container\">\n      <div className=\"search-box-wrap\">\n        <div className=\"header\">\n          <Button type=\"primary\">搜索</Button>\n          <Button type=\"primary\">重置</Button>\n        </div>\n        <div className=\"search-box\">\n          <Input style={{ width: 200 }} placeholder=\"请输入姓名\" />\n          <Input style={{ width: 200 }} placeholder=\"请输入身份证号\" />\n          <Input style={{ width: 200 }} placeholder=\"请输入年龄\" />\n        </div>\n      </div>\n      <Table\n        dataSource={dataSource}\n        columns={columns}\n        onRow={record => {\n          return {\n            onDoubleClick: event => {\n              history.push(`/viewer/${record.id}`)\n            },\n          }\n        }}\n      />\n    </div>\n  )\n}\n\nexport default StudyList\n","import React, { useState } from 'react'\nimport './TaskList.scss'\nimport { Table, Form, Input, Button, Modal } from 'antd'\n\nconst CollectionCreateForm = ({ visible, onCreate, onCancel }) => {\n  const [form] = Form.useForm()\n  const formItemLayout = {\n    labelCol: { span: 4 },\n  }\n  return (\n    <Modal\n      visible={visible}\n      title=\"连接\"\n      onCancel={onCancel}\n      okText=\"确定\"\n      cancelText=\"取消\"\n      onOk={() => {\n        form\n          .validateFields()\n          .then(values => {\n            form.resetFields()\n            onCreate(values)\n          })\n          .catch(info => {})\n      }}\n    >\n      <Form {...formItemLayout} form={form} name=\"basic\" initialValues={{ remember: true }}>\n        <Form.Item label=\"地址\" name=\"address\" rules={[{ required: true, message: '请输入地址' }]}>\n          <Input placeholder=\"请输入地址\" />\n        </Form.Item>\n        <Form.Item label=\"密码\" name=\"password\" rules={[{ required: true, message: '请输入密码' }]}>\n          <Input placeholder=\"请输入密码\" />\n        </Form.Item>\n      </Form>\n    </Modal>\n  )\n}\n\nconst dataSource = [\n  {\n    id: 1,\n    key: '1',\n    user: '张三',\n    time: '2012-12-12',\n    content: '删除列表一',\n    mmark: '',\n  },\n  {\n    id: 2,\n    key: '2',\n    user: '李四',\n    time: '2012-12-12',\n    content: '删除列表二',\n    mmark: '',\n  },\n  {\n    id: 3,\n    key: '3',\n    user: '王五',\n    time: '2012-12-12',\n    content: '删除列表三',\n    mmark: '',\n  },\n]\n\nconst columns = [\n  {\n    title: '操作人员',\n    dataIndex: 'user',\n    key: 'user',\n  },\n  {\n    title: '操作时间',\n    dataIndex: 'time',\n    key: 'time',\n  },\n  {\n    title: '操作内容',\n    dataIndex: 'content',\n    key: 'content',\n  },\n  {\n    title: '备注',\n    dataIndex: 'mmark',\n    key: 'mmark',\n  },\n]\n\nconst TaskList = () => {\n  const [visible, setVisible] = useState(false)\n  const onCreate = values => {\n    console.log(values)\n    setVisible(false)\n  }\n\n  const open = () => {\n    setVisible(true)\n  }\n\n  return (\n    <>\n      <div className=\"task-header\">\n        <Button onClick={open} type=\"primary\">\n          连接\n        </Button>\n      </div>\n      <div className=\"task-list-container\">\n        <Table dataSource={dataSource} columns={columns} />\n      </div>\n      <CollectionCreateForm\n        visible={visible}\n        onCreate={onCreate}\n        onCancel={() => {\n          setVisible(false)\n        }}\n      />\n    </>\n  )\n}\n\nexport default TaskList\n","import IndexComponent from '../components/index'\nimport Viewer from '../pages/Viewer/Viewer'\nimport StudyList from '../pages/StudyList/StudyList'\nimport TaskList from '../pages/TaskList/TaskList'\n\nconst routes = [\n  {\n    path: '/',\n    component: IndexComponent,\n    routes: [\n      {\n        path: '/studyList',\n        component: StudyList,\n        routes: [],\n      },\n      {\n        path: '/taskList',\n        component: TaskList,\n        routes: [],\n      },\n      {\n        path: '/viewer/:studyInstanceUids',\n        component: Viewer,\n        routes: [],\n      },\n    ],\n  },\n]\n\nexport default routes\n","import React from 'react'\nimport { renderRoutes } from 'react-router-config'\nimport { BrowserRouter } from 'react-router-dom'\nimport routes from './config'\n\nconst Router = () => {\n  return (\n    <>\n      <BrowserRouter>{renderRoutes(routes)}</BrowserRouter>\n    </>\n  )\n}\n\nexport default Router\n","import React from 'react'\nimport Router from './router'\nimport 'antd/dist/antd.css'\nimport './assets/scss/reset.scss'\nimport './assets/scss/common.scss'\n\nconst App = () => {\n  return (\n    <div className=\"App\">\n      <Router />\n    </div>\n  )\n}\n\nexport default App\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry)\n      getFID(onPerfEntry)\n      getFCP(onPerfEntry)\n      getLCP(onPerfEntry)\n      getTTFB(onPerfEntry)\n    })\n  }\n}\n\nexport default reportWebVitals\n","import dicomParser from 'dicom-parser'\nimport cornerstone from 'cornerstone-core'\nimport cornerstoneWADOImageLoader from 'cornerstone-wado-image-loader'\nimport cornerstoneMath from 'cornerstone-math'\nimport cornerstoneTools from 'cornerstone-tools'\nimport Hammer from 'hammerjs'\n\nexport default function initCornerstone() {\n  // Cornertone Tools\n  cornerstoneTools.external.cornerstone = cornerstone\n  cornerstoneTools.external.Hammer = Hammer\n  cornerstoneTools.external.cornerstoneMath = cornerstoneMath\n\n  // 初始化\n  cornerstoneTools.init()\n\n  // Preferences\n  const fontFamily =\n    'Work Sans, Roboto, OpenSans, HelveticaNeue-Light, Helvetica Neue Light, Helvetica Neue, Helvetica, Arial, Lucida Grande, sans-serif'\n  cornerstoneTools.textStyle.setFont(`16px ${fontFamily}`)\n  cornerstoneTools.toolStyle.setToolWidth(2)\n  cornerstoneTools.toolColors.setToolColor('rgb(255, 255, 0)')\n  cornerstoneTools.toolColors.setActiveColor('rgb(0, 255, 0)')\n\n  cornerstoneTools.store.state.touchProximity = 40\n\n  // IMAGE LOADER\n  cornerstoneWADOImageLoader.external.cornerstone = cornerstone\n  cornerstoneWADOImageLoader.external.dicomParser = dicomParser\n  cornerstoneWADOImageLoader.webWorkerManager.initialize({\n    maxWebWorkers: navigator.hardwareConcurrency || 1,\n    startWebWorkersOnDemand: true,\n    taskConfiguration: {\n      decodeTask: {\n        initializeCodecsOnStartup: false,\n        usePDFJS: false,\n        strict: false,\n      },\n    },\n  })\n\n  // Debug\n  window.cornerstone = cornerstone\n  window.cornerstoneTools = cornerstoneTools\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport reportWebVitals from './reportWebVitals'\nimport initCornerstone from './initCornerstone.js'\n\n// 初始化\ninitCornerstone()\n\nReactDOM.render(<App />, document.getElementById('root'))\n\nreportWebVitals()\n"],"sourceRoot":""}